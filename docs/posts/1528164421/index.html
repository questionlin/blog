<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        ç”¨äººè¯æ•™ä½ è®¾è®¡æ¨¡å¼ - æˆ‘çš„åšå®¢
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i>  </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpeg" />
        </div>
        <div class="name">
            <i>ljj</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ğŸš€-ç®€ä»‹"><span class="toc-text">ğŸš€ ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#âš ï¸-è¯·æ³¨æ„"><span class="toc-text">âš ï¸ è¯·æ³¨æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è®¾è®¡æ¨¡å¼çš„ç§ç±»"><span class="toc-text">è®¾è®¡æ¨¡å¼çš„ç§ç±»</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#åˆ›å»ºå‹æ¨¡å¼"><span class="toc-text">åˆ›å»ºå‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ -ç®€å•å·¥å‚æ¨¡å¼"><span class="toc-text">ğŸ  ç®€å•å·¥å‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ­-å·¥å‚æ–¹æ³•æ¨¡å¼"><span class="toc-text">ğŸ­ å·¥å‚æ–¹æ³•æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ”¨-æŠ½è±¡å·¥å‚æ¨¡å¼"><span class="toc-text">ğŸ”¨ æŠ½è±¡å·¥å‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ‘·-å»ºé€ è€…æ¨¡å¼"><span class="toc-text">ğŸ‘· å»ºé€ è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ‘-åŸå‹æ¨¡å¼"><span class="toc-text">ğŸ‘ åŸå‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ’-å•ä¾‹æ¨¡å¼"><span class="toc-text">ğŸ’ å•ä¾‹æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ç»“æ„å‹æ¨¡å¼"><span class="toc-text">ç»“æ„å‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ”Œ-é€‚é…å™¨æ¨¡å¼"><span class="toc-text">ğŸ”Œ é€‚é…å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸš¡-æ¡¥æ¥æ¨¡å¼"><span class="toc-text">ğŸš¡ æ¡¥æ¥æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸŒ¿-ç»„åˆæ¨¡å¼"><span class="toc-text">ğŸŒ¿ ç»„åˆæ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#â˜•-è£…é¥°å™¨æ¨¡å¼"><span class="toc-text">â˜• è£…é¥°å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ“¦-é—¨é¢æ¨¡å¼"><span class="toc-text">ğŸ“¦ é—¨é¢æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸƒ-äº«å…ƒæ¨¡å¼"><span class="toc-text">ğŸƒ äº«å…ƒæ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ±-ä»£ç†æ¨¡å¼"><span class="toc-text">ğŸ± ä»£ç†æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#è¡Œä¸ºå‹æ¨¡å¼"><span class="toc-text">è¡Œä¸ºå‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ”—-è´£ä»»é“¾æ¨¡å¼"><span class="toc-text">ğŸ”— è´£ä»»é“¾æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ‘®-å‘½ä»¤æ¨¡å¼"><span class="toc-text">ğŸ‘® å‘½ä»¤æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#â¿-è¿­ä»£å™¨æ¨¡å¼"><span class="toc-text">â¿ è¿­ä»£å™¨æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ğŸ‘½-ä¸­ä»‹æ¨¡å¼"><span class="toc-text">ğŸ‘½ ä¸­ä»‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ’¾-å¤‡å¿˜å½•æ¨¡å¼"><span class="toc-text">ğŸ’¾ å¤‡å¿˜å½•æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ˜-è§‚å¯Ÿè€…æ¨¡å¼"><span class="toc-text">ğŸ˜ è§‚å¯Ÿè€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸƒ-è®¿é—®è€…æ¨¡å¼"><span class="toc-text">ğŸƒ è®¿é—®è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ’¡-ç­–ç•¥æ¨¡å¼"><span class="toc-text">ğŸ’¡ ç­–ç•¥æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ’¢-çŠ¶æ€æ¨¡å¼"><span class="toc-text">ğŸ’¢ çŠ¶æ€æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ“’-æ¨¡æ¿æ¨¡å¼"><span class="toc-text">ğŸ“’ æ¨¡æ¿æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸš¦-æ”¶å°¾äº†åŒå¿—ä»¬"><span class="toc-text">ğŸš¦ æ”¶å°¾äº†åŒå¿—ä»¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ‘¬-Contribution"><span class="toc-text">ğŸ‘¬ Contribution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¿»è¯‘"><span class="toc-text">ç¿»è¯‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#License"><span class="toc-text">License</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i>  </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        ç”¨äººè¯æ•™ä½ è®¾è®¡æ¨¡å¼
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2018-06-01 15:30:18</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#php" title="php">php</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <p><img src="https://cloud.githubusercontent.com/assets/11269635/23065273/1b7e5938-f515-11e6-8dd3-d0d58de6bb9a.png" alt="Design Patterns For Humans"></p>
<hr>
<p></p><p align="center">
ğŸ‰ å¯¹è®¾è®¡æ¨¡å¼çš„æç®€è¯´æ˜ï¼ğŸ‰
</p><p></p>
<p></p><p align="center">
è¿™ä¸ªè¯é¢˜å¯ä»¥è½»æ˜“è®©ä»»ä½•äººç³Šæ¶‚ã€‚ç°åœ¨æˆ‘å°è¯•é€šè¿‡ç”¨<i>æœ€ç®€å•</i>çš„æ–¹å¼è¯´æ˜å®ƒä»¬ï¼Œæ¥è®©ä½ ï¼ˆå’Œæˆ‘ï¼‰æŠŠä»–ä»¬åƒé€ã€‚
</p><p></p>
<hr>
<h1 id="ğŸš€-ç®€ä»‹"><a href="#ğŸš€-ç®€ä»‹" class="headerlink" title="ğŸš€ ç®€ä»‹"></a>ğŸš€ ç®€ä»‹</h1><p>è®¾è®¡æ¨¡å¼ç”¨æ¥è§£å†³é‡å¤çš„é—®é¢˜ï¼›<strong>æ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„æŒ‡å¯¼æ–¹é’ˆ</strong>ã€‚å®ƒä»¬ä¸æ˜¯ç±»(class)ï¼ŒåŒ…(packages)ï¼Œæˆ–è€…åº“(libraries)ï¼Œä½ ä¸èƒ½å¼•å…¥å®ƒä»¬ï¼Œç„¶åç­‰å¾…å¥‡è¿¹å‘ç”Ÿã€‚å®ƒä»¬æ˜¯é’ˆå¯¹è§£å†³ç‰¹å®šç¯å¢ƒä¸‹ç‰¹å®šé—®é¢˜çš„æŒ‡å¯¼æ–¹é’ˆã€‚</p>
<blockquote>
<p>è®¾è®¡æ¨¡å¼ç”¨æ¥è§£å†³é‡å¤çš„é—®é¢˜ï¼›æ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„æŒ‡å¯¼æ–¹é’ˆ</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘çš„è§£é‡Š</p>
<blockquote>
<p>In software engineering, a software design pattern is a general reusable solution to a commonly occurring problem within a given context in software design. It is not a finished design that can be transformed directly into source or machine code. It is a description or template for how to solve a problem that can be used in many different situations.</p>
</blockquote>
<h2 id="âš ï¸-è¯·æ³¨æ„"><a href="#âš ï¸-è¯·æ³¨æ„" class="headerlink" title="âš ï¸ è¯·æ³¨æ„"></a>âš ï¸ è¯·æ³¨æ„</h2><ul>
<li>è®¾è®¡æ¨¡å¼ä¸æ˜¯è§£å†³ä½ æ‰€æœ‰é—®é¢˜çš„é“¶å¼¹ã€‚</li>
<li>ä¸è¦å°è¯•å¼ºè¡Œä½¿ç”¨å®ƒä»¬ï¼›å¦‚æœåšäº†ï¼Œä¸å¥½çš„äº‹æƒ…å¯èƒ½å‘ç”Ÿã€‚è¯·è®°ä½è®¾è®¡æ¨¡å¼æ˜¯<strong>è§£å†³</strong>é—®é¢˜çš„æ–¹æ¡ˆï¼Œä¸æ˜¯<strong>å‘ç°</strong>é—®é¢˜ï¼›æ‰€ä»¥ä¸è¦è¿‡åº¦æ€è€ƒã€‚</li>
<li>å¦‚æœåœ¨æ­£ç¡®çš„åœ°æ–¹ä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨ï¼Œå®ƒä»¬è¢«è¯æ˜æ˜¯æœ‰å¸®åŠ©çš„ï¼›å¦åˆ™ç»“æœå¯èƒ½æ˜¯ä¸€å †å¯æ€•æ··ä¹±çš„ä»£ç ã€‚</li>
</ul>
<blockquote>
<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä½¿ç”¨ PHP-7 ä¹¦å†™ï¼Œä½†ä½ ä¸åº”æ­¢æ­¥äºæ­¤ï¼Œå› ä¸ºç†å¿µæ˜¯ç›¸é€šçš„ã€‚å†åŠ ä¸Š,<strong>å¯¹å…¶ä»–è¯­è¨€çš„æ”¯æŒæ­£åœ¨è·¯ä¸Š</strong>ã€‚</p>
</blockquote>
<h2 id="è®¾è®¡æ¨¡å¼çš„ç§ç±»"><a href="#è®¾è®¡æ¨¡å¼çš„ç§ç±»" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„ç§ç±»"></a>è®¾è®¡æ¨¡å¼çš„ç§ç±»</h2><ul>
<li><a href="#åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹</a></li>
<li><a href="#ç»“æ„å‹æ¨¡å¼">ç»“æ„å‹</a></li>
<li><a href="#è¡Œä¸ºå‹æ¨¡å¼">è¡Œä¸ºå‹</a></li>
</ul>
<h1 id="åˆ›å»ºå‹æ¨¡å¼"><a href="#åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼"></a>åˆ›å»ºå‹æ¨¡å¼</h1><p>ç™½è¯</p>
<blockquote>
<p>åˆ›å»ºå‹æ¨¡å¼ä¾§é‡å¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ç»„ç›¸å…³å¯¹è±¡ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, creational design patterns are design patterns that deal with object creation mechanisms, trying to create objects in a manner suitable to the situation. The basic form of object creation could result in design problems or added complexity to the design. Creational design patterns solve this problem by somehow controlling this object creation.</p>
</blockquote>
<ul>
<li><a href="#-ç®€å•å·¥å‚æ¨¡å¼">ç®€å•å·¥å‚æ¨¡å¼ Simple Factory</a></li>
<li><a href="#-å·¥å‚æ–¹æ³•æ¨¡å¼">å·¥å‚æ–¹æ³•æ¨¡å¼ Factory Method</a></li>
<li><a href="#-æŠ½è±¡å·¥å‚æ¨¡å¼">æŠ½è±¡å·¥å‚æ¨¡å¼ Abstract Factory</a></li>
<li><a href="#-å»ºé€ è€…æ¨¡å¼">å»ºé€ è€…æ¨¡å¼ Builder</a></li>
<li><a href="#-åŸå‹æ¨¡å¼">åŸå‹æ¨¡å¼ Prototype</a></li>
<li><a href="#-å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼ Singleton</a></li>
</ul>
<h2 id="ğŸ -ç®€å•å·¥å‚æ¨¡å¼"><a href="#ğŸ -ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ğŸ  ç®€å•å·¥å‚æ¨¡å¼"></a>ğŸ  ç®€å•å·¥å‚æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>å‡è®¾ï¼Œä½ æ­£åœ¨å»ºé€ ä¸€æ‰€æˆ¿å­ï¼Œä½ éœ€è¦é—¨ã€‚å¦‚æœæ¯æ¬¡ä½ éœ€è¦ä¸€æ‰‡é—¨ä½ éƒ½è¦ç©¿ä¸Šæœ¨å·¥æœå¼€å§‹åœ¨æˆ¿å­é‡Œé€ æ‰‡é—¨ï¼Œå°†ä¼šæ˜¯ä¸€å›¢ä¹±ã€‚å–è€Œä»£ä¹‹çš„æ˜¯è®©å·¥å‚é€ å¥½ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ç®€å•å·¥å‚æ¨¡å¼åœ¨ä¸æš´éœ²ç”Ÿæˆé€»è¾‘çš„å‰æä¸‹ç”Ÿæˆä¸€ä¸ªå®ä¾‹ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In object-oriented programming (OOP), a factory is an object for creating other objects â€“ formally a factory is a function or method that returns objects of a varying prototype or class from some method call, which is assumed to be â€œnewâ€.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé—¨çš„æ¥å£å’Œå®ç°
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getWidth</span><span class="params">()</span> : <span class="title">float</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHeight</span><span class="params">()</span> : <span class="title">float</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WoodenDoor</span> <span class="keyword">implements</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $width;</span><br><span class="line">    <span class="keyword">protected</span> $height;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(float $width, float $height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;width = $width;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;height = $height;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getWidth</span><span class="params">()</span> : <span class="title">float</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;width;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHeight</span><span class="params">()</span> : <span class="title">float</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œæˆ‘ä»¬æœ‰äº†å·¥å‚æ¥åˆ¶é€ å’Œè¿”å›é—¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoorFactory</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">makeDoor</span><span class="params">($width, $height)</span> : <span class="title">Door</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> WoodenDoor($width, $height);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åè¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$door = DoorFactory::makeDoor(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Width: '</span> . $door-&gt;getWidth();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Height: '</span> . $door-&gt;getHeight();</span><br></pre></td></tr></table></figure></p>
<p><strong>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ</strong></p>
<p>å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸åªæ˜¯å‡ ä¸ªèµ‹å€¼å’Œé€»è¾‘è®¡ç®—ï¼ŒæŠŠè¿™ä»¶å·¥ä½œäº¤ç»™ä¸€ä¸ªå·¥å‚è€Œä¸æ˜¯åˆ°å¤„é‡å¤ç›¸åŒçš„ä»£ç å°±æ¯”è¾ƒåˆé€‚äº†ã€‚</p>
<h2 id="ğŸ­-å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#ğŸ­-å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="ğŸ­ å·¥å‚æ–¹æ³•æ¨¡å¼"></a>ğŸ­ å·¥å‚æ–¹æ³•æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>è®¾æƒ³ä¸€ä¸ªäººäº‹ç»ç†ã€‚ä¸€ä¸ªäººæ˜¯ä¸å¯èƒ½é¢è¯•æ‰€æœ‰èŒä½çš„ã€‚åŸºäºèŒä½ç©ºç¼ºï¼Œå¥¹å¿…é¡»æŠŠé¢è¯•å§”æ‰˜ç»™ä¸åŒçš„äººã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>å®ƒæä¾›äº†ä¸€ä¸ªæŠŠç”Ÿæˆé€»è¾‘ç§»äº¤ç»™å­ç±»çš„æ–¹æ³•ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In class-based programming, the factory method pattern is a creational pattern that uses factory methods to deal with the problem of creating objects without having to specify the exact class of the object that will be created. This is done by creating objects by calling a factory methodâ€”either specified in an interface and implemented by child classes, or implemented in a base class and optionally overridden by derived classesâ€”rather than by calling a constructor.</p>
</blockquote>
<p> <strong>ä»£ç ä¾‹å­</strong></p>
<p>ä»¥ä¸Šé¢çš„äººäº‹ç»ç†ä¸ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªé¢è¯•å®˜æ¥å£å’Œä¸€äº›å®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Interviewer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">askQuestions</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Developer</span> <span class="keyword">implements</span> <span class="title">Interviewer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">askQuestions</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Asking about design patterns!'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommunityExecutive</span> <span class="keyword">implements</span> <span class="title">Interviewer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">askQuestions</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Asking about community building'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬æ–°å»ºæˆ‘ä»¬çš„äººäº‹ç»ç† <code>HiringManager</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HiringManager</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Factory method</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeInterviewer</span><span class="params">()</span> : <span class="title">Interviewer</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">takeInterview</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        $interviewer = <span class="keyword">$this</span>-&gt;makeInterviewer();</span><br><span class="line">        $interviewer-&gt;askQuestions();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥ç»§æ‰¿å®ƒï¼Œå¹¶ä¸”ç”Ÿæˆéœ€è¦çš„é¢è¯•å®˜
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DevelopmentManager</span> <span class="keyword">extends</span> <span class="title">HiringManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeInterviewer</span><span class="params">()</span> : <span class="title">Interviewer</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Developer();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MarketingManager</span> <span class="keyword">extends</span> <span class="title">HiringManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeInterviewer</span><span class="params">()</span> : <span class="title">Interviewer</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CommunityExecutive();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$devManager = <span class="keyword">new</span> DevelopmentManager();</span><br><span class="line">$devManager-&gt;takeInterview(); <span class="comment">// Output: Asking about design patterns</span></span><br><span class="line"></span><br><span class="line">$marketingManager = <span class="keyword">new</span> MarketingManager();</span><br><span class="line">$marketingManager-&gt;takeInterview(); <span class="comment">// Output: Asking about community building.</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<p>å½“ä¸€ä¸ªç±»é‡Œæœ‰æ™®éæ€§çš„å¤„ç†è¿‡ç¨‹ï¼Œä½†æ˜¯å­ç±»è¦åœ¨è¿è¡Œæ—¶æ‰ç¡®å®šã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼Œè°ƒç”¨è€…ä¸çŸ¥é“å®ƒéœ€è¦å“ªä¸ªå­ç±»ã€‚</p>
<h2 id="ğŸ”¨-æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#ğŸ”¨-æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="ğŸ”¨ æŠ½è±¡å·¥å‚æ¨¡å¼"></a>ğŸ”¨ æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>æ‰©å±•æˆ‘ä»¬ç®€å•å·¥å‚æ¨¡å¼çš„ä¾‹å­ã€‚åŸºäºä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥ä»æœ¨é—¨åº—å¾—åˆ°ä¸€æ‰‡æœ¨é—¨ï¼Œä»é“é—¨åº—å¾—åˆ°ä¸€æ‰‡é“é—¨ï¼Œæˆ–è€…ä»å¡‘æ–™é—¨åº—å¾—åˆ°ä¸€æ‰‡å¡‘æ–™é—¨ã€‚è€Œä¸”ä½ éœ€è¦ä¸€ä¸ªæœ‰ä¸åŒä¸“é•¿çš„äººæ¥å®‰è£…è¿™æ‰‡é—¨ï¼Œæ¯”å¦‚ä¸€ä¸ªæœ¨åŒ æ¥å®‰æœ¨é—¨ï¼Œç„Šå·¥æ¥å®‰é“é—¨ç­‰ã€‚æ­£å¦‚ä½ çœ‹çš„ï¼Œé—¨å’Œå®‰è£…å·¥æœ‰ä¾èµ–æ€§ï¼Œæœ¨é—¨éœ€è¦æœ¨åŒ ï¼Œé“é—¨éœ€è¦ç„Šå·¥ç­‰ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ä¸€ä¸ªåˆ¶é€ å·¥å‚çš„å·¥å‚ï¼›ä¸€ä¸ªå·¥å‚æŠŠç‹¬ç«‹ä½†æ˜¯ç›¸å…³ï¼æœ‰ä¾èµ–æ€§çš„å·¥å‚è¿›è¡Œåˆ†ç±»ï¼Œä½†æ˜¯ä¸éœ€è¦ç»™å‡ºå…·ä½“çš„ç±»ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The abstract factory pattern provides a way to encapsulate a group of individual factories that have a common theme without specifying their concrete classes</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ç¿»è¯‘ä¸Šé¢é—¨çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†é—¨ <code>Door</code> çš„æ¥å£å’Œä¸€äº›å®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WoodenDoor</span> <span class="keyword">implements</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'I am a wooden door'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IronDoor</span> <span class="keyword">implements</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'I am an iron door'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬æœ‰äº†æ¯ç§é—¨çš„å®‰è£…ä¸“å®¶</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">DoorFittingExpert</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welder</span> <span class="keyword">implements</span> <span class="title">DoorFittingExpert</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'I can only fit iron doors'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Carpenter</span> <span class="keyword">implements</span> <span class="title">DoorFittingExpert</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'I can only fit wooden doors'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†æŠ½è±¡å·¥å‚æ¥åˆ›å»ºå…¨éƒ¨ç›¸å…³çš„å¯¹è±¡ï¼Œå³æœ¨é—¨å·¥å‚åˆ¶é€ æœ¨é—¨å’Œæœ¨é—¨å®‰è£…ä¸“å®¶ï¼Œé“é—¨å·¥å‚åˆ¶é€ é“é—¨å’Œé“é—¨å®‰è£…ä¸“å®¶
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">DoorFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeDoor</span><span class="params">()</span> : <span class="title">Door</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeFittingExpert</span><span class="params">()</span> : <span class="title">DoorFittingExpert</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ¨å¤´å·¥å‚è¿”å›æœ¨é—¨å’Œæœ¨åŒ </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WoodenDoorFactory</span> <span class="keyword">implements</span> <span class="title">DoorFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeDoor</span><span class="params">()</span> : <span class="title">Door</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WoodenDoor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeFittingExpert</span><span class="params">()</span> : <span class="title">DoorFittingExpert</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Carpenter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é“é—¨å·¥å‚è¿”å›é“é—¨å’Œå¯¹åº”å®‰è£…ä¸“å®¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IronDoorFactory</span> <span class="keyword">implements</span> <span class="title">DoorFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeDoor</span><span class="params">()</span> : <span class="title">Door</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> IronDoor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeFittingExpert</span><span class="params">()</span> : <span class="title">DoorFittingExpert</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Welder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$woodenFactory = <span class="keyword">new</span> WoodenDoorFactory();</span><br><span class="line"></span><br><span class="line">$door = $woodenFactory-&gt;makeDoor();</span><br><span class="line">$expert = $woodenFactory-&gt;makeFittingExpert();</span><br><span class="line"></span><br><span class="line">$door-&gt;getDescription();  <span class="comment">// è¾“å‡º: I am a wooden door</span></span><br><span class="line">$expert-&gt;getDescription(); <span class="comment">// è¾“å‡º: I can only fit wooden doors</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é“é—¨å·¥å‚ä¹Ÿä¸€æ ·</span></span><br><span class="line">$ironFactory = <span class="keyword">new</span> IronDoorFactory();</span><br><span class="line"></span><br><span class="line">$door = $ironFactory-&gt;makeDoor();</span><br><span class="line">$expert = $ironFactory-&gt;makeFittingExpert();</span><br><span class="line"></span><br><span class="line">$door-&gt;getDescription();  <span class="comment">// è¾“å‡º: I am an iron door</span></span><br><span class="line">$expert-&gt;getDescription(); <span class="comment">// è¾“å‡º: I can only fit iron doors</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä½ æ‰€è§ï¼Œæœ¨é—¨å·¥å‚åŒ…å«äº†æœ¨åŒ  <code>carpenter</code> å’Œæœ¨é—¨ <code>wooden door</code> è€Œé“é—¨å·¥å‚åŒ…å«äº†é“é—¨ <code>iron door</code> å’Œç„Šå·¥ <code>welder</code>ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ç¡®ä¿æ¯æ‰‡åˆ¶é€ å‡ºæ¥çš„é—¨ä¸ä¼šå¸¦ä¸Šé”™è¯¯çš„å®‰è£…å·¥ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<p>å½“åˆ›å»ºé€»è¾‘ä¸é‚£ä¹ˆç®€å•ï¼Œè€Œä¸”ç›¸äº’ä¹‹é—´æœ‰ä¾èµ–æ—¶</p>
<h2 id="ğŸ‘·-å»ºé€ è€…æ¨¡å¼"><a href="#ğŸ‘·-å»ºé€ è€…æ¨¡å¼" class="headerlink" title="ğŸ‘· å»ºé€ è€…æ¨¡å¼"></a>ğŸ‘· å»ºé€ è€…æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>æƒ³è±¡ä½ åœ¨éº¦å½“åŠ³ï¼Œä½ è¦ä¸€ä¸ªâ€œå·¨æ— éœ¸â€ï¼Œä»–ä»¬é©¬ä¸Šå°±ç»™ä½ äº†ï¼Œæ²¡æœ‰ç–‘é—®ï¼Œè¿™æ˜¯ç®€å•å·¥å‚çš„é€»è¾‘ã€‚ä½†å¦‚æœåˆ›å»ºé€»è¾‘åŒ…å«æ›´å¤šæ­¥éª¤ã€‚æ¯”å¦‚ä½ æƒ³è¦ä¸€ä¸ªè‡ªå®šä¹‰èµ›ç™¾å‘³å¥—é¤ï¼Œä½ æœ‰å¤šç§é€‰æ‹©æ¥åˆ¶ä½œæ±‰å ¡ï¼Œä¾‹å¦‚ä½ è¦å“ªç§é¢åŒ…ï¼Ÿä½ è¦å“ªç§è°ƒå‘³é…±ï¼Ÿä½ è¦å“ªç§å¥¶é…ªï¼Ÿç­‰ã€‚è¿™ç§æƒ…å†µå°±éœ€è¦å»ºé€ è€…æ¨¡å¼æ¥å¤„ç†ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>è®©ä½ èƒ½åˆ›å»ºä¸åŒç‰¹ç‚¹çš„å¯¹è±¡è€Œé¿å…æ„é€ å‡½æ•°æ±¡æŸ“ã€‚å½“ä¸€ä¸ªå¯¹è±¡éƒ½å¤šç§ç‰¹ç‚¹çš„æ—¶å€™æ¯”è¾ƒå®ç”¨ã€‚æˆ–è€…åœ¨åˆ›é€ é€»è¾‘é‡Œæœ‰è®¸å¤šæ­¥éª¤çš„æ—¶å€™ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The builder pattern is an object creation software design pattern with the intentions of finding a solution to the telescoping constructor anti-pattern.</p>
</blockquote>
<p>è¯è™½å¦‚æ­¤ï¼Œè®©æˆ‘å†™ä¸€ç‚¹å…³äºä¼¸ç¼©æ„é€ å‡½æ•°åé¢æ¨¡å¼ã€‚åœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½çœ‹è¿‡ä¸‹é¢è¿™æ ·çš„æ„é€ å‡½æ•°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($size, $cheese = true, $pepperoni = true, $tomato = false, $lettuce = true)</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä½ æ‰€è§ï¼›æ„é€ å‡½æ•°å‚æ•°çš„æ•°é‡é©¬ä¸Šå°±è¦å¤±å»æ§åˆ¶ï¼Œè€Œä¸”æ¢³ç†å‚æ•°ä¹Ÿä¼šå˜å¾—å›°éš¾ã€‚è€Œä¸”å¦‚æœä½ å°†æ¥æƒ³è¦å¢åŠ æ›´å¤šé€‰é¡¹ï¼Œå‚æ•°ä¹Ÿä¼šç»§ç»­å¢åŠ ã€‚è¿™å°±å«åšä¼¸ç¼©æ„é€ å‡½æ•°åé¢æ¨¡å¼ã€‚</p>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>æ­£å¸¸çš„åšæ³•æ˜¯ä½¿ç”¨åˆ›å»ºè€…æ¨¡å¼ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†è¦åšçš„æ±‰å ¡</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Burger</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $cheese = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">protected</span> $pepperoni = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">protected</span> $lettuce = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">protected</span> $tomato = <span class="keyword">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(BurgerBuilder $builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;size = $builder-&gt;size;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;cheese = $builder-&gt;cheese;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;pepperoni = $builder-&gt;pepperoni;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;lettuce = $builder-&gt;lettuce;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;tomato = $builder-&gt;tomato;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬æœ‰äº†åˆ¶ä½œè€…</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BurgerBuilder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $cheese = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">public</span> $pepperoni = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">public</span> $lettuce = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">public</span> $tomato = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(int $size)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;size = $size;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addPepperoni</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;pepperoni = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addLettuce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;lettuce = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addCheese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;cheese = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addTomato</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;tomato = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">build</span><span class="params">()</span> : <span class="title">Burger</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Burger(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$burger = (<span class="keyword">new</span> BurgerBuilder(<span class="number">14</span>))</span><br><span class="line">                    -&gt;addPepperoni()</span><br><span class="line">                    -&gt;addLettuce()</span><br><span class="line">                    -&gt;addTomato()</span><br><span class="line">                    -&gt;build();</span><br></pre></td></tr></table></figure>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<p>å½“å¯¹è±¡æœ‰å¤šç§ç‰¹æ€§è€Œè¦é¿å…æ„é€ å‡½æ•°å˜é•¿ã€‚å’Œå·¥å‚æ¨¡å¼çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ï¼›å½“åˆ›å»ºè¿‡ç¨‹åªæœ‰ä¸€ä¸ªæ­¥éª¤çš„æ—¶å€™ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œè€Œå½“åˆ›å»ºè¿‡ç¨‹æœ‰å¤šä¸ªæ­¥éª¤çš„æ—¶å€™ä½¿ç”¨åˆ›é€ è€…æ¨¡å¼ã€‚</p>
<h2 id="ğŸ‘-åŸå‹æ¨¡å¼"><a href="#ğŸ‘-åŸå‹æ¨¡å¼" class="headerlink" title="ğŸ‘ åŸå‹æ¨¡å¼"></a>ğŸ‘ åŸå‹æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>è®°å¾—å¤šåˆ©å—ï¼Ÿé‚£åªå…‹éš†ç¾Šï¼ä¸è¦åœ¨æ„ç»†èŠ‚ï¼Œç°åœ¨çš„é‡ç‚¹æ˜¯å…‹éš†</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>é€šè¿‡å…‹éš†å·²æœ‰çš„å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The prototype pattern is a creational design pattern in software development. It is used when the type of objects to create is determined by a prototypical instance, which is cloned to produce new objects.</p>
</blockquote>
<p>é•¿è¯çŸ­è¯´ï¼Œå®ƒè®©ä½ åˆ›å»ºå·²æœ‰å¯¹è±¡çš„æ‹·è´ï¼Œç„¶åä¿®æ”¹åˆ°ä½ è¦çš„æ ·å­ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹å»ºé€ ã€‚</p>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>åœ¨ PHP é‡Œï¼Œç®€å•çš„ä½¿ç”¨ <code>clone</code> å°±å¯ä»¥äº†</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sheep</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $name;</span><br><span class="line">    <span class="keyword">protected</span> $category;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name, string $category = <span class="string">'Mountain Sheep'</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;category = $category;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span><span class="params">(string $name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setCategory</span><span class="params">(string $category)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;category = $category;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getCategory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;category;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå®ƒå¯ä»¥è¢«è¿™æ ·å…‹éš†
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$original = <span class="keyword">new</span> Sheep(<span class="string">'Jolly'</span>);</span><br><span class="line"><span class="keyword">echo</span> $original-&gt;getName(); <span class="comment">// Jolly</span></span><br><span class="line"><span class="keyword">echo</span> $original-&gt;getCategory(); <span class="comment">// Mountain Sheep</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Clone and modify what is required</span></span><br><span class="line">$cloned = <span class="keyword">clone</span> $original;</span><br><span class="line">$cloned-&gt;setName(<span class="string">'Dolly'</span>);</span><br><span class="line"><span class="keyword">echo</span> $cloned-&gt;getName(); <span class="comment">// Dolly</span></span><br><span class="line"><span class="keyword">echo</span> $cloned-&gt;getCategory(); <span class="comment">// Mountain sheep</span></span><br></pre></td></tr></table></figure></p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é­”æ³•æ–¹æ³• <code>__clone</code> æ¥æ”¹å˜å…‹éš†é€»è¾‘ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<p>å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦è·Ÿå·²æœ‰çš„å¯¹è±¡ç›¸ä¼¼ï¼Œæˆ–è€…å½“åˆ›é€ è¿‡ç¨‹æ¯”èµ·å…‹éš†æ¥å¤ªæ˜‚è´µæ—¶ã€‚</p>
<h2 id="ğŸ’-å•ä¾‹æ¨¡å¼"><a href="#ğŸ’-å•ä¾‹æ¨¡å¼" class="headerlink" title="ğŸ’ å•ä¾‹æ¨¡å¼"></a>ğŸ’ å•ä¾‹æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä¸€ä¸ªå›½å®¶åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªæ€»ç»Ÿã€‚å½“ä½¿å‘½å¬å”¤çš„æ—¶å€™ï¼Œè¿™ä¸ªæ€»ç»Ÿè¦é‡‡å–è¡ŒåŠ¨ã€‚è¿™é‡Œçš„æ€»ç»Ÿå°±æ˜¯å•ä¾‹çš„ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ç¡®ä¿æŒ‡å®šçš„ç±»åªç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, the singleton pattern is a software design pattern that restricts the instantiation of a class to one object. This is useful when exactly one object is needed to coordinate actions across the system.</p>
</blockquote>
<p>å•ä¾‹æ¨¡å¼å…¶å®è¢«çœ‹ä½œä¸€ç§åé¢æ¨¡å¼ï¼Œåº”è¯¥é¿å…è¿‡åº¦ä½¿ç”¨ã€‚å®ƒä¸ä¸€å®šä¸å¥½ï¼Œè€Œä¸”ç¡®æœ‰ä¸€äº›æœ‰æ•ˆçš„ç”¨ä¾‹ï¼Œä½†æ˜¯åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒåœ¨ä½ çš„åº”ç”¨é‡Œå¼•å…¥äº†å…¨å±€çŠ¶æ€ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹æ”¹å˜ï¼Œä¼šå½±å“å…¶ä»–åœ°æ–¹ã€‚è€Œä¸”å¾ˆéš¾ debug ã€‚å¦ä¸€ä¸ªåå¤„æ˜¯å®ƒè®©ä½ çš„ä»£ç ç´§è€¦åˆï¼Œè€Œä¸”å¾ˆéš¾ä»¿åˆ¶å•ä¾‹ã€‚</p>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>è¦åˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œå…ˆè®©æ„é€ å‡½æ•°ç§æœ‰ï¼Œä¸èƒ½å…‹éš†ï¼Œä¸èƒ½ç»§æ‰¿ï¼Œç„¶ååˆ›é€ ä¸€ä¸ªé™æ€å˜é‡æ¥ä¿å­˜è¿™ä¸ªå®ä¾‹
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">President</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> $instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Hide the constructor</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span><span class="params">()</span> : <span class="title">President</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">self</span>::$instance) &#123;</span><br><span class="line">            <span class="keyword">self</span>::$instance = <span class="keyword">new</span> <span class="keyword">self</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>::$instance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Disable cloning</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Disable unserialize</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åè¦ä½¿ç”¨çš„è¯
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$president1 = President::getInstance();</span><br><span class="line">$president2 = President::getInstance();</span><br><span class="line"></span><br><span class="line">var_dump($president1 === $president2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h1 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h1><p>ç™½è¯</p>
<blockquote>
<p>ç»“æ„å‹æ¨¡å¼æ›´å…³æ³¨å¯¹è±¡çš„ç»„åˆï¼Œæ¢å¥è¯è¯´ï¼Œå®ä½“å¦‚ä½•å½¼æ­¤ä½¿ç”¨ã€‚æˆ–è€…è¯´ï¼Œå®ƒä»¬å¸®åŠ©è§£ç­”â€œå¦‚ä½•å»ºé€ è½¯ä»¶ç»„ä»¶ï¼Ÿâ€</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, structural design patterns are design patterns that ease the design by identifying a simple way to realize relationships between entities.</p>
</blockquote>
<ul>
<li><a href="#-é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼ Adapter</a></li>
<li><a href="#-æ¡¥æ¥æ¨¡å¼">æ¡¥æ¥æ¨¡å¼ Bridge</a></li>
<li><a href="#-ç»„åˆæ¨¡å¼">ç»„åˆæ¨¡å¼ Composite</a></li>
<li><a href="#-è£…é¥°å™¨æ¨¡å¼">è£…é¥°å™¨æ¨¡å¼ Decorator</a></li>
<li><a href="#-é—¨é¢æ¨¡å¼">é—¨é¢æ¨¡å¼ Facade</a></li>
<li><a href="#-äº«å…ƒæ¨¡å¼">äº«å…ƒæ¨¡å¼ Flyweight</a></li>
<li><a href="#-ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼ Proxy</a></li>
</ul>
<h2 id="ğŸ”Œ-é€‚é…å™¨æ¨¡å¼"><a href="#ğŸ”Œ-é€‚é…å™¨æ¨¡å¼" class="headerlink" title="ğŸ”Œ é€‚é…å™¨æ¨¡å¼"></a>ğŸ”Œ é€‚é…å™¨æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>å‡è®¾åœ¨ä½ çš„å­˜å‚¨å¡é‡Œæœ‰ä¸€äº›ç…§ç‰‡ï¼Œä½ è¦æŠŠå®ƒä»¬ä¼ åˆ°ç”µè„‘ã€‚ä¸ºäº†ä¼ è¾“ï¼Œä½ éœ€è¦ä¸€ä¸ªå…¼å®¹ç”µè„‘ç«¯å£çš„é€‚é…å™¨æ¥è¿æ¥å­˜å‚¨å¡å’Œç”µè„‘ã€‚åœ¨è¿™é‡Œï¼Œè¯»å¡å™¨å°±æ˜¯ä¸€ä¸ªé€‚é…å™¨ã€‚
å¦ä¸€ä¸ªä¾‹å­æ˜¯ç”µæºè½¬æ¢å™¨ï¼›ä¸€ä¸ªä¸‰è„šçš„æ’å£ä¸èƒ½æ’åˆ°ä¸¤å£çš„æ’åº§ä¸Šï¼Œå®ƒéœ€è¦ä¸€ä¸ªç”µæºè½¬æ¢å™¨æ¥å…¼å®¹ä¸¤å£çš„æ’åº§ã€‚
è¿˜æœ‰ä¸€ä¸ªä¾‹å­æ˜¯ç¿»è¯‘å°†ä¸€ä¸ªäººè¯´çš„è¯ç¿»è¯‘ç»™å¦ä¸€ä¸ªäººã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>é€‚é…å™¨æ¨¡å¼è®©ä½ å°è£…ä¸€ä¸ªä¸å…¼å®¹çš„å¯¹è±¡åˆ°ä¸€ä¸ªé€‚é…å™¨ï¼Œæ¥å…¼å®¹å…¶ä»–ç±»ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, the adapter pattern is a software design pattern that allows the interface of an existing class to be used as another interface. It is often used to make existing classes work with others without modifying their source code.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>å‡è®¾ä¸€ä¸ªçŒäººç‹©çŒç‹®å­çš„æ¸¸æˆã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæ¥å£ç‹®å­ <code>Lion</code> æ¥å®ç°æ‰€æœ‰ç§ç±»çš„ç‹®å­</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Lion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">roar</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AfricanLion</span> <span class="keyword">implements</span> <span class="title">Lion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">roar</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AsianLion</span> <span class="keyword">implements</span> <span class="title">Lion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">roar</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥åŠçŒäººéœ€è¦ç‹©çŒä»»ä½•ç‹®å­ <code>Lion</code> æ¥å£çš„å®ç°ã€‚
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hunter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">hunt</span><span class="params">(Lion $lion)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬ä¸å¾—ä¸åœ¨æ¸¸æˆé‡ŒåŠ ä¸€ä¸ªé‡ç‹— <code>WildDog</code> ï¼ŒçŒäººä¹Ÿèƒ½ç‹©çŒå®ƒã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿™ä¹ˆåšï¼Œå› ä¸ºç‹—æœ‰ä¸åŒçš„æ¥å£ã€‚ä¸ºäº†å…¼å®¹æˆ‘ä»¬çš„çŒäººï¼Œæˆ‘ä»¬ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªå…¼å®¹çš„é€‚é…å™¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This needs to be added to the game</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WildDog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Adapter around wild dog to make it compatible with our game</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WildDogAdapter</span> <span class="keyword">implements</span> <span class="title">Lion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $dog;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(WildDog $dog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;dog = $dog;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">roar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;dog-&gt;bark();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨é‡ç‹— <code>WildDog</code> å¯ä»¥åœ¨æ¸¸æˆé‡Œä½¿ç”¨äº†ï¼Œé€šè¿‡é‡ç‹—é€‚é…å™¨ <code>WildDogAdapter</code>.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$wildDog = <span class="keyword">new</span> WildDog();</span><br><span class="line">$wildDogAdapter = <span class="keyword">new</span> WildDogAdapter($wildDog);</span><br><span class="line"></span><br><span class="line">$hunter = <span class="keyword">new</span> Hunter();</span><br><span class="line">$hunter-&gt;hunt($wildDogAdapter);</span><br></pre></td></tr></table></figure>
<h2 id="ğŸš¡-æ¡¥æ¥æ¨¡å¼"><a href="#ğŸš¡-æ¡¥æ¥æ¨¡å¼" class="headerlink" title="ğŸš¡ æ¡¥æ¥æ¨¡å¼"></a>ğŸš¡ æ¡¥æ¥æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«å¾ˆå¤šç½‘é¡µçš„ç½‘ç«™ï¼Œä½ æƒ³è¦ç”¨æˆ·å¯ä»¥æ”¹å˜ä¸»é¢˜ã€‚ä½ ä¼šæ€ä¹ˆåšï¼Ÿåˆ›å»ºæ¯ä¸ªé¡µé¢å¯¹åº”æ¯ä¸ªä¸»é¢˜çš„æ‹·å¤‡ï¼Œè¿˜æ˜¯åªæ˜¯åˆ›å»ºä¸åŒçš„ä¸»é¢˜ï¼Œç„¶åæ ¹æ®ç”¨æˆ·çš„å–œå¥½æ¥åŠ è½½å®ƒä»¬ï¼Ÿæ¡¥æ¥æ¨¡å¼è®©ä½ èƒ½åšåˆ°åè€…ã€‚</p>
</blockquote>
<p><img src="https://cloud.githubusercontent.com/assets/11269635/23065293/33b7aea0-f515-11e6-983f-98823c9845ee.png" alt="With and without the bridge pattern"></p>
<p>ç™½è¯</p>
<blockquote>
<p>æ¡¥æ¥æ¨¡å¼å€¾å‘æ„é€ è€Œéç»§æ‰¿ã€‚å®ç°ç»†èŠ‚è¢«ä»ä¸€ä¸ªå±‚æ¨é€åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„å¦ä¸€å±‚ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The bridge pattern is a design pattern used in software engineering that is meant to â€œdecouple an abstraction from its implementation so that the two can vary independentlyâ€</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ç¿»è¯‘æˆ‘ä»¬ä¸Šé¢çš„ç½‘é¡µä¾‹å­ã€‚è¿™é‡Œæ˜¯ç½‘é¡µ <code>WebPage</code> å±‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">WebPage</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Theme $theme)</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">About</span> <span class="keyword">implements</span> <span class="title">WebPage</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $theme;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Theme $theme)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;theme = $theme;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"About page in "</span> . <span class="keyword">$this</span>-&gt;theme-&gt;getColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Careers</span> <span class="keyword">implements</span> <span class="title">WebPage</span> </span>&#123;</span><br><span class="line">   <span class="keyword">protected</span> $theme;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Theme $theme)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">$this</span>-&gt;theme = $theme;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"Careers page in "</span> . <span class="keyword">$this</span>-&gt;theme-&gt;getColor();</span><br><span class="line">   &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥åŠä¸»é¢˜å±‚
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Theme</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DarkTheme</span> <span class="keyword">implements</span> <span class="title">Theme</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Dark Black'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LightTheme</span> <span class="keyword">implements</span> <span class="title">Theme</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Off white'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AquaTheme</span> <span class="keyword">implements</span> <span class="title">Theme</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Light blue'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸¤ä¸ªå±‚çš„äº’åŠ¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$darkTheme = <span class="keyword">new</span> DarkTheme();</span><br><span class="line"></span><br><span class="line">$about = <span class="keyword">new</span> About($darkTheme);</span><br><span class="line">$careers = <span class="keyword">new</span> Careers($darkTheme);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $about-&gt;getContent(); <span class="comment">// "About page in Dark Black";</span></span><br><span class="line"><span class="keyword">echo</span> $careers-&gt;getContent(); <span class="comment">// "Careers page in Dark Black";</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸŒ¿-ç»„åˆæ¨¡å¼"><a href="#ğŸŒ¿-ç»„åˆæ¨¡å¼" class="headerlink" title="ğŸŒ¿ ç»„åˆæ¨¡å¼"></a>ğŸŒ¿ ç»„åˆæ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä»»ä½•ç»„ç»‡éƒ½æ˜¯ç”±å‘˜å·¥ç»„æˆã€‚æ¯ä¸ªå‘˜å·¥éƒ½æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œå³ä¸€ç¬”è–ªæ°´ï¼Œä¸€äº›è´£ä»»ï¼Œå¯èƒ½éœ€è¦å‘åˆ«äººæ±‡æŠ¥ï¼Œå¯èƒ½æœ‰ä¸€äº›ä¸‹å±ç­‰ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ç»„åˆæ¨¡å¼è®©è°ƒç”¨è€…å¯ä»¥ç”¨ç»Ÿä¸€çš„æ¨¡å¼å¯¹å¾…ä¸åŒçš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, the composite pattern is a partitioning design pattern. The composite pattern describes that a group of objects is to be treated in the same way as a single instance of an object. The intent of a composite is to â€œcomposeâ€ objects into tree structures to represent part-whole hierarchies. Implementing the composite pattern lets clients treat individual objects and compositions uniformly.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>æ‹¿ä¸Šé¢çš„å‘˜å·¥ä¸ºä¾‹ã€‚ä¸‹é¢æ˜¯ä¸åŒçš„å‘˜å·¥ç±»å‹</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name, float $salary)</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> : <span class="title">string</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setSalary</span><span class="params">(float $salary)</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getSalary</span><span class="params">()</span> : <span class="title">float</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoles</span><span class="params">()</span>  : <span class="title">array</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Developer</span> <span class="keyword">implements</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $salary;</span><br><span class="line">    <span class="keyword">protected</span> $name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name, float $salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;salary = $salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> : <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setSalary</span><span class="params">(float $salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;salary = $salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getSalary</span><span class="params">()</span> : <span class="title">float</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoles</span><span class="params">()</span> : <span class="title">array</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;roles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Designer</span> <span class="keyword">implements</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $salary;</span><br><span class="line">    <span class="keyword">protected</span> $name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name, float $salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;salary = $salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> : <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setSalary</span><span class="params">(float $salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;salary = $salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getSalary</span><span class="params">()</span> : <span class="title">float</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoles</span><span class="params">()</span> : <span class="title">array</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;roles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”±ä¸åŒç±»å‹å‘˜å·¥ç»„æˆçš„ç»„ç»‡</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Organization</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> $employees;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addEmployee</span><span class="params">(Employee $employee)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;employees[] = $employee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getNetSalaries</span><span class="params">()</span> : <span class="title">float</span> </span>&#123;</span><br><span class="line">        $netSalary = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;employees <span class="keyword">as</span> $employee) &#123;</span><br><span class="line">            $netSalary += $employee-&gt;getSalary();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $netSalary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡†å¤‡å‘˜å·¥</span></span><br><span class="line">$john = <span class="keyword">new</span> Developer(<span class="string">'John Doe'</span>, <span class="number">12000</span>);</span><br><span class="line">$jane = <span class="keyword">new</span> Designer(<span class="string">'Jane'</span>, <span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠä»–ä»¬åŠ åˆ°ç»„ç»‡é‡Œå»</span></span><br><span class="line">$organization = <span class="keyword">new</span> Organization();</span><br><span class="line">$organization-&gt;addEmployee($john);</span><br><span class="line">$organization-&gt;addEmployee($jane);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Net salaries: "</span> . $organization-&gt;getNetSalaries(); <span class="comment">// Net Salaries: 22000</span></span><br></pre></td></tr></table></figure>
<h2 id="â˜•-è£…é¥°å™¨æ¨¡å¼"><a href="#â˜•-è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="â˜• è£…é¥°å™¨æ¨¡å¼"></a>â˜• è£…é¥°å™¨æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>æƒ³è±¡ä½ å¼€ä¸€å®¶æ±½è½¦æœåŠ¡åº—ï¼Œæä¾›å„ç§æœåŠ¡ã€‚ç°åœ¨ä½ æ€ä¹ˆè®¡ç®—æ”¶è´¹ï¼Ÿä½ é€‰æ‹©ä¸€ä¸ªæœåŠ¡ï¼Œç„¶åä¸æ–­æŠŠä»·æ ¼åŠ åˆ°å·²é€‰æœåŠ¡çš„ä»·æ ¼é‡Œï¼Œç›´åˆ°å¾—åˆ°æ€»ä»·ã€‚è¿™é‡Œï¼Œæ¯ç§æœåŠ¡å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>è£…é¥°å™¨æ¨¡å¼è®©ä½ èƒ½åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„è¡¨ç°ï¼Œé€šè¿‡æŠŠå®ƒä»¬å°è£…åˆ°ä¸€ä¸ªè£…é¥°å™¨ç±»ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In object-oriented programming, the decorator pattern is a design pattern that allows behavior to be added to an individual object, either statically or dynamically, without affecting the behavior of other objects from the same class. The decorator pattern is often useful for adhering to the Single Responsibility Principle, as it allows functionality to be divided between classes with unique areas of concern.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>è®©æˆ‘ä»¬ä»¥å’–å•¡ä¸ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªå’–å•¡æ¥å£çš„ç®€å•å®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getCost</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleCoffee</span> <span class="keyword">implements</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getCost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Simple coffee'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æƒ³è¦è®©ä»£ç å¯æ‰©å±•ï¼Œä»¥åœ¨éœ€è¦çš„æ—¶å€™æ”¹å˜é€‰é¡¹ã€‚è®©æˆ‘ä»¬å¢åŠ ä¸€äº›æ‰©å±•ï¼ˆè£…é¥°å™¨ï¼‰
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MilkCoffee</span> <span class="keyword">implements</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> $coffee;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Coffee $coffee)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;coffee = $coffee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getCost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;coffee-&gt;getCost() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;coffee-&gt;getDescription() . <span class="string">', milk'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WhipCoffee</span> <span class="keyword">implements</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $coffee;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Coffee $coffee)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;coffee = $coffee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getCost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;coffee-&gt;getCost() + <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;coffee-&gt;getDescription() . <span class="string">', whip'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VanillaCoffee</span> <span class="keyword">implements</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $coffee;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Coffee $coffee)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;coffee = $coffee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getCost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;coffee-&gt;getCost() + <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;coffee-&gt;getDescription() . <span class="string">', vanilla'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨è®©æˆ‘ä»¬ç”Ÿæˆå’–å•¡</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$someCoffee = <span class="keyword">new</span> SimpleCoffee();</span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getCost(); <span class="comment">// 10</span></span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getDescription(); <span class="comment">// Simple Coffee</span></span><br><span class="line"></span><br><span class="line">$someCoffee = <span class="keyword">new</span> MilkCoffee($someCoffee);</span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getCost(); <span class="comment">// 12</span></span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getDescription(); <span class="comment">// Simple Coffee, milk</span></span><br><span class="line"></span><br><span class="line">$someCoffee = <span class="keyword">new</span> WhipCoffee($someCoffee);</span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getCost(); <span class="comment">// 17</span></span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getDescription(); <span class="comment">// Simple Coffee, milk, whip</span></span><br><span class="line"></span><br><span class="line">$someCoffee = <span class="keyword">new</span> VanillaCoffee($someCoffee);</span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getCost(); <span class="comment">// 20</span></span><br><span class="line"><span class="keyword">echo</span> $someCoffee-&gt;getDescription(); <span class="comment">// Simple Coffee, milk, whip, vanilla</span></span><br></pre></td></tr></table></figure>
<h2 id="ğŸ“¦-é—¨é¢æ¨¡å¼"><a href="#ğŸ“¦-é—¨é¢æ¨¡å¼" class="headerlink" title="ğŸ“¦ é—¨é¢æ¨¡å¼"></a>ğŸ“¦ é—¨é¢æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä½ æ€ä¹ˆæ‰“å¼€ç”µè„‘ï¼Ÿä½ ä¼šè¯´â€œæŒ‰ç”µæºé”®â€ï¼ä½ è¿™ä¹ˆè®¤ä¸ºæ˜¯å› ä¸ºä½ åœ¨ç”¨ç”µè„‘å¤–éƒ¨æä¾›çš„ç®€å•æ¥å£ï¼Œè€Œåœ¨å†…éƒ¨ï¼Œå®ƒå¿…é¡»åšå¾ˆåšå·¥ä½œæ¥å®ç°è¿™ä»¶äº‹ã€‚è¿™ä¸ªå¤æ‚å­ç³»ç»Ÿçš„ç®€å•æ¥å£å°±æ˜¯ä¸€ä¸ªé—¨é¢ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>é—¨é¢æ¨¡å¼æä¾›äº†ä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿçš„ç®€å•æ¥å£ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>A facade is an object that provides a simplified interface to a larger body of code, such as a class library.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>æ‹¿ä¸Šé¢ç”µè„‘ä¸ºä¾‹ã€‚ä¸‹é¢æ˜¯ç”µè„‘ç±»</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getElectricShock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Ouch!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeSound</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Beep beep!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">showLoadingScreen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Loading.."</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bam</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Ready to be used!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">closeEverything</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Bup bup bup buzzzz!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sooth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Zzzzz"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">pullCurrent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Haaah!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯é—¨é¢
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComputerFacade</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $computer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Computer $computer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer = $computer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">turnOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;getElectricShock();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;makeSound();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;showLoadingScreen();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;bam();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">turnOff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;closeEverything();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;pullCurrent();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;computer-&gt;sooth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä½•ä½¿ç”¨é—¨é¢
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$computer = <span class="keyword">new</span> ComputerFacade(<span class="keyword">new</span> Computer());</span><br><span class="line">$computer-&gt;turnOn(); <span class="comment">// Ouch! Beep beep! Loading.. Ready to be used!</span></span><br><span class="line">$computer-&gt;turnOff(); <span class="comment">// Bup bup buzzz! Haah! Zzzzz</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸƒ-äº«å…ƒæ¨¡å¼"><a href="#ğŸƒ-äº«å…ƒæ¨¡å¼" class="headerlink" title="ğŸƒ äº«å…ƒæ¨¡å¼"></a>ğŸƒ äº«å…ƒæ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä½ åœ¨å°åº—é‡Œå–è¿‡èŒ¶å—ï¼Ÿä»–ä»¬ç»å¸¸æ¯”ä½ è¦çš„å¤šåšå‡ æ¯ï¼ŒæŠŠå‰©ä¸‹çš„ç•™ç»™åˆ«çš„å®¢äººï¼Œä»¥æ­¤æ¥çœèµ„æºï¼Œæ¯”å¦‚ç…¤æ°”ã€‚äº«å…ƒæ¨¡å¼å°±æ˜¯ä»¥ä¸Šçš„ä½“ç°ï¼Œå³åˆ†äº«ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>é€šè¿‡å°½å¯èƒ½åˆ†äº«ç›¸ä¼¼çš„å¯¹è±¡ï¼Œæ¥å°†å†…å­˜ä½¿ç”¨æˆ–è®¡ç®—å¼€é”€é™åˆ°æœ€ä½ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In computer programming, flyweight is a software design pattern. A flyweight is an object that minimizes memory use by sharing as much data as possible with other similar objects; it is a way to use objects in large numbers when a simple repeated representation would use an unacceptable amount of memory.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ç¿»è¯‘ä¸Šé¢çš„èŒ¶çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†èŒ¶çš„ç±»å‹å’Œç”Ÿæˆå™¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»»ä½•è¢«ç¼“å­˜çš„ä¸œè¥¿éƒ½è¢«å«åšäº«å…ƒã€‚ </span></span><br><span class="line"><span class="comment">// è¿™é‡ŒèŒ¶çš„ç±»å‹å°±æ˜¯äº«å…ƒã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KarakTea</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åƒå·¥å‚ä¸€æ ·å·¥ä½œï¼Œä¿å­˜èŒ¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeaMaker</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $availableTea = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">make</span><span class="params">($preference)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="keyword">$this</span>-&gt;availableTea[$preference])) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;availableTea[$preference] = <span class="keyword">new</span> KarakTea();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;availableTea[$preference];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„èŒ¶å§ <code>TeaShop</code> ï¼Œæ¥å•å’Œæä¾›æœåŠ¡</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeaShop</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> $orders;</span><br><span class="line">    <span class="keyword">protected</span> $teaMaker;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(TeaMaker $teaMaker)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;teaMaker = $teaMaker;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">takeOrder</span><span class="params">(string $teaType, int $table)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;orders[$table] = <span class="keyword">$this</span>-&gt;teaMaker-&gt;make($teaType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">serve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">$this</span>-&gt;orders <span class="keyword">as</span> $table =&gt; $tea) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"Serving tea to table# "</span> . $table;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$teaMaker = <span class="keyword">new</span> TeaMaker();</span><br><span class="line">$shop = <span class="keyword">new</span> TeaShop($teaMaker);</span><br><span class="line"></span><br><span class="line">$shop-&gt;takeOrder(<span class="string">'less sugar'</span>, <span class="number">1</span>);</span><br><span class="line">$shop-&gt;takeOrder(<span class="string">'more milk'</span>, <span class="number">2</span>);</span><br><span class="line">$shop-&gt;takeOrder(<span class="string">'without sugar'</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">$shop-&gt;serve();</span><br><span class="line"><span class="comment">// Serving tea to table# 1</span></span><br><span class="line"><span class="comment">// Serving tea to table# 2</span></span><br><span class="line"><span class="comment">// Serving tea to table# 5</span></span><br></pre></td></tr></table></figure>
<h2 id="ğŸ±-ä»£ç†æ¨¡å¼"><a href="#ğŸ±-ä»£ç†æ¨¡å¼" class="headerlink" title="ğŸ± ä»£ç†æ¨¡å¼"></a>ğŸ± ä»£ç†æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä½ æœ‰æ²¡æœ‰ç”¨è¿‡é—¨å¡æ¥é€šè¿‡ä¸€æ‰‡é—¨ï¼Ÿæœ‰å¤šç§æ–¹å¼æ¥æ‰“å¼€é‚£æ‰‡é—¨ï¼Œå³å®ƒå¯ä»¥è¢«é—¨å¡æ‰“å¼€ï¼Œæˆ–è€…æŒ‰å¼€é—¨æŒ‰é’®æ‰“å¼€ã€‚è¿™æ‰‡é—¨çš„ä¸»è¦åŠŸèƒ½æ˜¯å¼€å…³ï¼Œä½†åœ¨é¡¶å±‚å¢åŠ äº†ä¸€ä¸ªä»£ç†æ¥å¢åŠ å…¶ä»–åŠŸèƒ½ã€‚ä¸‹é¢çš„ä¾‹å­èƒ½æ›´å¥½çš„è¯´æ˜ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œä¸€ä¸ªç±»è¡¨ç°å‡ºäº†å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>A proxy, in its most general form, is a class functioning as an interface to something else. A proxy is a wrapper or agent object that is being called by the client to access the real serving object behind the scenes. Use of the proxy can simply be forwarding to the real object, or can provide additional logic. In the proxy extra functionality can be provided, for example caching when operations on the real object are resource intensive, or checking preconditions before operations on the real object are invoked.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>æ‹¿ä¸Šé¢å®‰å…¨é—¨ä¸ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†é—¨çš„æ¥å£å’Œå®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">open</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">close</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LabDoor</span> <span class="keyword">implements</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Opening lab door"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Closing the lab door"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¸‹é¢æ˜¯ä¸€ä¸ªä»£ç†æ¥å®‰ä¿ä»»ä½•æˆ‘ä»¬è¦çš„é—¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Security</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $door;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Door $door)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;door = $door;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">open</span><span class="params">($password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;authenticate($password)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;door-&gt;open();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        	<span class="keyword">echo</span> <span class="string">"Big no! It ain't possible."</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">authenticate</span><span class="params">($password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $password === <span class="string">'$ecr@t'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;door-&gt;close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$door = <span class="keyword">new</span> Security(<span class="keyword">new</span> LabDoor());</span><br><span class="line">$door-&gt;open(<span class="string">'invalid'</span>); <span class="comment">// Big no! It ain't possible.</span></span><br><span class="line"></span><br><span class="line">$door-&gt;open(<span class="string">'$ecr@t'</span>); <span class="comment">// Opening lab door</span></span><br><span class="line">$door-&gt;close(); <span class="comment">// Closing lab door</span></span><br></pre></td></tr></table></figure></p>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯ä¸€äº›æ•°æ®æ˜ å°„çš„å®ç°ã€‚æ¯”å¦‚ï¼Œæˆ‘æœ€è¿‘ç”¨è¿™ä¸ªæ¨¡å¼ç»™ MongoDB åšäº†ä¸€ä¸ªæ•°æ®æ˜ å°„å™¨ ODM (Object Data Mapper)ï¼Œæˆ‘ç”¨é­”æœ¯æ–¹æ³• <code>__call()</code> ç»™ mongo ç±»åšäº†ä¸€ä¸ªä»£ç†ã€‚æ‰€æœ‰æ‰§è¡Œçš„æ–¹æ³•éƒ½è¢«ä»£ç†åˆ°åŸå§‹çš„ mongo ç±»ï¼Œè¿”å›æ”¶åˆ°çš„ç»“æœã€‚ä½†æ˜¯åœ¨ <code>find</code> æˆ– <code>findOne</code> çš„æƒ…å†µï¼Œæ•°æ®è¢«æ˜ å°„åˆ°å¯¹åº”çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè¢«è¿”å›ï¼Œè€Œä¸æ˜¯ <code>Cursor</code>ã€‚</p>
<h1 id="è¡Œä¸ºå‹æ¨¡å¼"><a href="#è¡Œä¸ºå‹æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹æ¨¡å¼"></a>è¡Œä¸ºå‹æ¨¡å¼</h1><p>ç™½è¯</p>
<blockquote>
<p>å®ƒå…³æ³¨å¯¹è±¡é—´çš„è´£ä»»åˆ†é…ã€‚å®ƒä»¬å’Œç»“æ„å‹æ¨¡å¼çš„åŒºåˆ«æ˜¯å®ƒä»¬ä¸æ­¢æ˜ç¡®æŒ‡æ˜ç»“æ„ï¼Œè€Œä¸”æŒ‡å‡ºäº†å®ƒä»¬ä¹‹é—´ä¼ é€’/äº¤æµçš„ä¿¡æ¯çš„å½¢å¼ã€‚æˆ–è€…æ¢å¥æˆ–è¯´ï¼Œå®ƒä»¬å¸®åŠ©å›ç­”äº†â€œå¦‚ä½•ç¡®å®šè½¯ä»¶ç»„ä»¶çš„è¡Œä¸ºï¼Ÿâ€</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, behavioral design patterns are design patterns that identify common communication patterns between objects and realize these patterns. By doing so, these patterns increase flexibility in carrying out this communication.</p>
</blockquote>
<ul>
<li><a href="#-è´£ä»»é“¾æ¨¡å¼">è´£ä»»é“¾æ¨¡å¼ Chain of Responsibility</a></li>
<li><a href="#-å‘½ä»¤æ¨¡å¼">å‘½ä»¤æ¨¡å¼ Command</a></li>
<li><a href="#-è¿­ä»£å™¨æ¨¡å¼">è¿­ä»£å™¨æ¨¡å¼ Iterator</a></li>
<li><a href="#-ä¸­ä»‹æ¨¡å¼">ä¸­ä»‹æ¨¡å¼ Mediator</a></li>
<li><a href="#-å¤‡å¿˜å½•æ¨¡å¼">å¤‡å¿˜å½•æ¨¡å¼ Memento</a></li>
<li><a href="#-è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼ Observer</a></li>
<li><a href="#-è®¿é—®è€…æ¨¡å¼">è®¿é—®è€…æ¨¡å¼ Visitor</a></li>
<li><a href="#-ç­–ç•¥æ¨¡å¼">ç­–ç•¥æ¨¡å¼ Strategy</a></li>
<li><a href="#-çŠ¶æ€æ¨¡å¼">çŠ¶æ€æ¨¡å¼ State</a></li>
<li><a href="#-æ¨¡æ¿æ¨¡å¼">æ¨¡æ¿æ¨¡å¼ Template Method</a></li>
</ul>
<h2 id="ğŸ”—-è´£ä»»é“¾æ¨¡å¼"><a href="#ğŸ”—-è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="ğŸ”— è´£ä»»é“¾æ¨¡å¼"></a>ğŸ”— è´£ä»»é“¾æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>æ¯”å¦‚ï¼Œæœ‰ä¸‰ä¸ªæ”¯ä»˜æ–¹å¼ (<code>A</code>, <code>B</code> å’Œ <code>C</code>) å®‰è£…åœ¨ä½ çš„è´¦æˆ·é‡Œï¼›æ¯ç§æ–¹å¼éƒ½æœ‰ä¸åŒé¢åº¦ã€‚<code>A</code> æœ‰ 100 å…ƒï¼Œ <code>B</code> æœ‰ 300 å…ƒï¼Œä»¥åŠ <code>C</code> æœ‰ 1000 å…ƒï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼çš„é¡ºåºæ˜¯ <code>A</code> ç„¶å <code>B</code> ç„¶å <code>C</code>ã€‚ä½ è¦ä¹°ä¸€äº›ä»·å€¼ 210 å…ƒçš„ä¸œè¥¿ã€‚ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼ï¼Œé¦–å…ˆè´¦æˆ· <code>A</code> ä¼šè¢«æ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿæ”¯ä»˜ï¼Œå¦‚æœæ˜¯ï¼Œæ”¯ä»˜ä¼šè¢«æ‰§è¡Œè€Œé“¾å­ç»ˆæ­¢ã€‚å¦‚æœå¦ï¼Œè¯·æ±‚ä¼šè½¬ç§»åˆ°è´¦æˆ· <code>B</code>ï¼Œæ£€æŸ¥é¢åº¦ï¼Œå¦‚æœæ˜¯ï¼Œé“¾å­ç»ˆæ­¢ï¼Œå¦åˆ™è¯·æ±‚ç»§ç»­è½¬ç§»ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„æ‰§è¡Œè€…ã€‚è¿™é‡Œ <code>A</code>ï¼Œ<code>B</code> å’Œ <code>C</code> æ˜¯é“¾æ¥é‡Œçš„ç¯èŠ‚ï¼Œå®ƒä»¬åˆèµ·æ¥å°±æ˜¯è´£ä»»é“¾ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>å®ƒæ„é€ äº†ä¸€ä¸ªå¯¹è±¡çš„é“¾ã€‚è¯·æ±‚è¿›å…¥ä¸€ç«¯ï¼Œç„¶åä»ä¸€ä¸ªå¯¹è±¡åˆ°å¦ä¸€ä¸ªå¯¹è±¡ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„æ‰§è¡Œè€…ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In object-oriented design, the chain-of-responsibility pattern is a design pattern consisting of a source of command objects and a series of processing objects. Each processing object contains logic that defines the types of command objects that it can handle; the rest are passed to the next processing object in the chain.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ç¿»è¯‘ä¸Šé¢çš„è´¦æˆ·ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªåŸºæœ¬è´¦æˆ·ï¼ŒåŒ…å«æŠŠè´¦æˆ·è¿æ¥èµ·æ¥çš„é€»è¾‘ã€‚ä»¥åŠä¸€äº›è´¦æˆ·</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $successor;</span><br><span class="line">    <span class="keyword">protected</span> $balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setNext</span><span class="params">(Account $account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;successor = $account;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">pay</span><span class="params">(float $amountToPay)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;canPay($amountToPay)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> sprintf(<span class="string">'Paid %s using %s'</span> . PHP_EOL, $amountToPay, get_called_class());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;successor) &#123;</span><br><span class="line">            <span class="keyword">echo</span> sprintf(<span class="string">'Cannot pay using %s. Proceeding ..'</span> . PHP_EOL, get_called_class());</span><br><span class="line">            <span class="keyword">$this</span>-&gt;successor-&gt;pay($amountToPay);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">Exception</span>(<span class="string">'None of the accounts have enough balance'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">canPay</span><span class="params">($amount)</span> : <span class="title">bool</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;balance &gt;= $amount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(float $balance)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;balance = $balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Paypal</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(float $balance)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;balance = $balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bitcoin</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(float $balance)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;balance = $balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬ç”¨ä¸Šé¢å®šä¹‰çš„ç¯èŠ‚ï¼ˆå³é“¶è¡Œ Bankï¼Œè´å® Paypalï¼Œæ¯”ç‰¹å¸ Bitcoinï¼‰å‡†å¤‡é“¾</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬å‡†å¤‡ä¸‹é¢è¿™æ ·çš„é“¾</span></span><br><span class="line"><span class="comment">//      $bank-&gt;$paypal-&gt;$bitcoin</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// é¦–é€‰é“¶è¡Œ bank</span></span><br><span class="line"><span class="comment">//      å¦‚æœé“¶è¡Œ bank ä¸èƒ½æ”¯ä»˜åˆ™é€‰æ‹©è´å® paypal</span></span><br><span class="line"><span class="comment">//      å¦‚æœè´å® paypal ä¸èƒ½æ”¯ä»˜åˆ™é€‰æ‹©æ¯”ç‰¹å¸ bit coin</span></span><br><span class="line"></span><br><span class="line">$bank = <span class="keyword">new</span> Bank(<span class="number">100</span>);          <span class="comment">// é“¶è¡Œ Bank æœ‰ä½™é¢ 100</span></span><br><span class="line">$paypal = <span class="keyword">new</span> Paypal(<span class="number">200</span>);      <span class="comment">// è´å® Paypal æœ‰ä½™é¢ 200</span></span><br><span class="line">$bitcoin = <span class="keyword">new</span> Bitcoin(<span class="number">300</span>);    <span class="comment">// æ¯”ç‰¹å¸ Bitcoin æœ‰ä½™é¢ 300</span></span><br><span class="line"></span><br><span class="line">$bank-&gt;setNext($paypal);</span><br><span class="line">$paypal-&gt;setNext($bitcoin);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å°è¯•ç”¨é¦–é€‰é¡¹æ”¯ä»˜ï¼Œå³é“¶è¡Œ bank</span></span><br><span class="line">$bank-&gt;pay(<span class="number">259</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºå°†ä¼šæ˜¯</span></span><br><span class="line"><span class="comment">// ==============</span></span><br><span class="line"><span class="comment">// Cannot pay using bank. Proceeding ..</span></span><br><span class="line"><span class="comment">// Cannot pay using paypal. Proceeding ..: </span></span><br><span class="line"><span class="comment">// Paid 259 using Bitcoin!</span></span><br></pre></td></tr></table></figure>
<h2 id="ğŸ‘®-å‘½ä»¤æ¨¡å¼"><a href="#ğŸ‘®-å‘½ä»¤æ¨¡å¼" class="headerlink" title="ğŸ‘® å‘½ä»¤æ¨¡å¼"></a>ğŸ‘® å‘½ä»¤æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä¸€ä¸ªæ™®éçš„ä¾‹å­æ˜¯ä½ åœ¨é¤é¦†ç‚¹é¤ã€‚ä½  (å³è°ƒç”¨è€… <code>Client</code>) è¦æ±‚æœåŠ¡å‘˜ (å³è°ƒç”¨å™¨ <code>Invoker</code>) ç«¯æ¥ä¸€äº›é£Ÿç‰© (å³å‘½ä»¤ <code>Command</code>)ï¼Œè€ŒæœåŠ¡å‘˜åªæ˜¯ç®€å•çš„æŠŠå‘½ä»¤ä¼ è¾¾ç»™çŸ¥é“æ€ä¹ˆåšèœçš„å¨å¸ˆ (å³æ¥æ”¶è€… <code>Receiver</code>)ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯ä½  (å³è°ƒç”¨è€… <code>Client</code>) æ‰“å¼€ (å³å‘½ä»¤ <code>Command</code>) ç”µè§† (å³æ¥æ”¶è€… <code>Receiver</code>)ï¼Œé€šè¿‡ä½¿ç”¨é¥æ§ (è°ƒç”¨å™¨ <code>Invoker</code>).</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>å…è®¸ä½ å°è£…å¯¹è±¡çš„åŠŸèƒ½ã€‚æ­¤æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ†ç¦»è°ƒç”¨è€…å’Œæ¥æ”¶è€…ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In object-oriented programming, the command pattern is a behavioral design pattern in which an object is used to encapsulate all information needed to perform an action or trigger an event at a later time. This information includes the method name, the object that owns the method and values for the method parameters.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥æ”¶è€…ï¼ŒåŒ…å«äº†æ¯ä¸€ä¸ªå¯æ‰§è¡Œçš„åŠŸèƒ½çš„å®ç°
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Receiver</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bulb</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">turnOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Bulb has been lit"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">turnOff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Darkness!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åä¸‹é¢æ˜¯æ¯ä¸ªå‘½ä»¤æ‰§è¡Œçš„æ¥å£ï¼Œä¹‹åæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå‘½ä»¤çš„é›†åˆ
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">execute</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">undo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">redo</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Command</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TurnOn</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $bulb;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Bulb $bulb)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bulb = $bulb;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bulb-&gt;turnOn();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">undo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bulb-&gt;turnOff();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">redo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TurnOff</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $bulb;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Bulb $bulb)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bulb = $bulb;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bulb-&gt;turnOff();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">undo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bulb-&gt;turnOn();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">redo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæ‰§è¡Œå™¨ <code>Invoker</code>ï¼Œè°ƒç”¨è€…å¯ä»¥é€šè¿‡å®ƒæ‰§è¡Œå‘½ä»¤
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Invoker</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RemoteControl</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">submit</span><span class="params">(Command $command)</span> </span>&#123;</span><br><span class="line">        $command-&gt;execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æœ€åæˆ‘ä»¬çœ‹çœ‹å¯ä»¥å¦‚ä½•ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$bulb = <span class="keyword">new</span> Bulb();</span><br><span class="line"></span><br><span class="line">$turnOn = <span class="keyword">new</span> TurnOn($bulb);</span><br><span class="line">$turnOff = <span class="keyword">new</span> TurnOff($bulb);</span><br><span class="line"></span><br><span class="line">$remote = <span class="keyword">new</span> RemoteControl();</span><br><span class="line">$remote-&gt;submit($turnOn); <span class="comment">// Bulb has been lit!</span></span><br><span class="line">$remote-&gt;submit($turnOff); <span class="comment">// Darkness!</span></span><br></pre></td></tr></table></figure></p>
<p>å‘½ä»¤æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ä¸€ä¸ªåŸºç¡€ç³»ç»Ÿçš„äº‹åŠ¡ã€‚å½“ä½ è¦ä¸€ç›´åœ¨æ‰§è¡Œå‘½ä»¤åé©¬ä¸Šç»´æŠ¤æ—¥å¿—ã€‚å¦‚æœå‘½ä»¤è¢«æ­£ç¡®æ‰§è¡Œï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œå¦åˆ™æ²¿æ—¥å¿—è¿­ä»£ï¼Œä¸€ç›´å¯¹æ¯ä¸ªå·²æ‰§è¡Œçš„å‘½ä»¤æ‰§è¡Œæ’¤é”€ <code>undo</code> ã€‚</p>
<h2 id="â¿-è¿­ä»£å™¨æ¨¡å¼"><a href="#â¿-è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="â¿ è¿­ä»£å™¨æ¨¡å¼"></a>â¿ è¿­ä»£å™¨æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>è€å¼è°ƒé¢‘æ”¶éŸ³æœºæ˜¯è¿­ä»£å™¨çš„å¥½ä¾‹å­ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸€äº›é¢‘é“å¼€å§‹ï¼Œç„¶åä½¿ç”¨å‰è¿›æˆ–åé€€æŒ‰é’®æ¥æµè§ˆæ¯ä¸ªé¢‘é“ã€‚æˆ–è€…ä»¥ MP3 æ’­æ”¾å™¨æˆ–ç”µè§†æœºä¸ºä¾‹ï¼Œä½ å¯ä»¥æŒ‰å‰è¿›æˆ–åé€€æŒ‰é’®æ¥æµè§ˆè¿ç»­çš„é¢‘é“ã€‚æˆ–è€…è¯´ï¼Œå®ƒä»¬éƒ½æä¾›äº†è¿­ä»£è¿ç»­çš„é¢‘é“ï¼Œæ­Œæ›²æˆ–å¹¿æ’­çš„æ¥å£ã€‚  </p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>å®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥è·å¾—å¯¹è±¡çš„å…ƒç´ ï¼Œè€Œä¸å¿…æš´éœ²åº•å±‚å®ç°ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In object-oriented programming, the iterator pattern is a design pattern in which an iterator is used to traverse a container and access the containerâ€™s elements. The iterator pattern decouples algorithms from containers; in some cases, algorithms are necessarily container-specific and thus cannot be decoupled.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>åœ¨ PHP é‡Œï¼Œç”¨ SPL (æ ‡å‡† PHP åº“) å®ç°éå¸¸ç®€å•ã€‚ç¿»è¯‘ä¸Šé¢çš„å¹¿æ’­ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†å¹¿æ’­å° <code>RadioStation</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RadioStation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $frequency;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(float $frequency)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;frequency = $frequency;    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getFrequency</span><span class="params">()</span> : <span class="title">float</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;frequency;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„è¿­ä»£å™¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Countable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Iterator</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StationList</span> <span class="keyword">implements</span> <span class="title">Countable</span>, <span class="title">Iterator</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** <span class="doctag">@var</span> RadioStation[] $stations */</span></span><br><span class="line">    <span class="keyword">protected</span> $stations = [];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** <span class="doctag">@var</span> int $counter */</span></span><br><span class="line">    <span class="keyword">protected</span> $counter;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addStation</span><span class="params">(RadioStation $station)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;stations[] = $station;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">removeStation</span><span class="params">(RadioStation $toRemove)</span> </span>&#123;</span><br><span class="line">        $toRemoveFrequency = $toRemove-&gt;getFrequency();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;stations = array_filter(<span class="keyword">$this</span>-&gt;stations, <span class="function"><span class="keyword">function</span> <span class="params">(RadioStation $station)</span> <span class="title">use</span> <span class="params">($toRemoveFrequency)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> $station-&gt;getFrequency() !== $toRemoveFrequency;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">count</span><span class="params">()</span> : <span class="title">int</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count(<span class="keyword">$this</span>-&gt;stations);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">current</span><span class="params">()</span> : <span class="title">RadioStation</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;stations[<span class="keyword">$this</span>-&gt;counter];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">key</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;counter;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;counter++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rewind</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;counter = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">valid</span><span class="params">()</span>: <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;stations[<span class="keyword">$this</span>-&gt;counter]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$stationList = <span class="keyword">new</span> StationList();</span><br><span class="line"></span><br><span class="line">$stationList-&gt;addStation(<span class="keyword">new</span> Station(<span class="number">89</span>));</span><br><span class="line">$stationList-&gt;addStation(<span class="keyword">new</span> Station(<span class="number">101</span>));</span><br><span class="line">$stationList-&gt;addStation(<span class="keyword">new</span> Station(<span class="number">102</span>));</span><br><span class="line">$stationList-&gt;addStation(<span class="keyword">new</span> Station(<span class="number">103.2</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>($stationList <span class="keyword">as</span> $station) &#123;</span><br><span class="line">    <span class="keyword">echo</span> $station-&gt;getFrequency() . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$stationList-&gt;removeStation(<span class="keyword">new</span> Station(<span class="number">89</span>)); <span class="comment">// Will remove station 89</span></span><br></pre></td></tr></table></figure></p>
<h1 id="ğŸ‘½-ä¸­ä»‹æ¨¡å¼"><a href="#ğŸ‘½-ä¸­ä»‹æ¨¡å¼" class="headerlink" title="ğŸ‘½ ä¸­ä»‹æ¨¡å¼"></a>ğŸ‘½ ä¸­ä»‹æ¨¡å¼</h1><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä¸€ä¸ªæ™®éçš„ä¾‹å­æ˜¯å½“ä½ ç”¨æ‰‹æœºå’Œåˆ«äººè°ˆè¯ï¼Œä½ å’Œåˆ«äººä¸­é—´éš”äº†ä¸€ä¸ªç”µä¿¡ç½‘ï¼Œä½ çš„å£°éŸ³ç©¿è¿‡å®ƒè€Œä¸æ˜¯ç›´æ¥å‘å‡ºå»ã€‚åœ¨è¿™é‡Œï¼Œç”µä¿¡ç½‘å°±æ˜¯ä¸€ä¸ªä¸­ä»‹ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ä¸­ä»‹æ¨¡å¼å¢åŠ äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å¯¹è±¡ï¼ˆå«åšä¸­ä»‹ï¼‰æ¥æ§åˆ¶ä¸¤ä¸ªå¯¹è±¡ï¼ˆå«åšåŒäº‹ï¼‰é—´çš„äº¤äº’ã€‚å®ƒå¸®åŠ©å‡å°‘ç±»å½¼æ­¤ä¹‹é—´äº¤æµçš„è€¦åˆåº¦ã€‚å› ä¸ºå®ƒä»¬ç°åœ¨ä¸éœ€è¦çŸ¥é“å½¼æ­¤çš„å®ç°ã€‚ </p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, the mediator pattern defines an object that encapsulates how a set of objects interact. This pattern is considered to be a behavioral pattern due to the way it can alter the programâ€™s running behavior.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„èŠå¤©å®¤ï¼ˆå³ä¸­ä»‹ï¼‰çš„ä¾‹å­ï¼Œç”¨æˆ·ï¼ˆå³åŒäº‹ï¼‰å½¼æ­¤å‘é€ä¿¡æ¯ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸­ä»‹ï¼Œå³èŠå¤©å®¤</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸­ä»‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChatRoom</span> <span class="keyword">implements</span> <span class="title">ChatRoomMediator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">showMessage</span><span class="params">(User $user, string $message)</span> </span>&#123;</span><br><span class="line">        $time = date(<span class="string">'M d, y H:i'</span>);</span><br><span class="line">        $sender = $user-&gt;getName();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> $time . <span class="string">'['</span> . $sender . <span class="string">']:'</span> . $message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬æœ‰ç”¨æˆ·ï¼Œå³åŒäº‹
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $name;</span><br><span class="line">    <span class="keyword">protected</span> $chatMediator;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name, ChatRoomMediator $chatMediator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;chatMediator = $chatMediator;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">($message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;chatMediator-&gt;showMessage(<span class="keyword">$this</span>, $message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæ˜¯ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$mediator = <span class="keyword">new</span> ChatRoom();</span><br><span class="line"></span><br><span class="line">$john = <span class="keyword">new</span> User(<span class="string">'John Doe'</span>, $mediator);</span><br><span class="line">$jane = <span class="keyword">new</span> User(<span class="string">'Jane Doe'</span>, $mediator);</span><br><span class="line"></span><br><span class="line">$john-&gt;send(<span class="string">'Hi there!'</span>);</span><br><span class="line">$jane-&gt;send(<span class="string">'Hey!'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºå°†ä¼šæ˜¯</span></span><br><span class="line"><span class="comment">// Feb 14, 10:58 [John]: Hi there!</span></span><br><span class="line"><span class="comment">// Feb 14, 10:58 [Jane]: Hey!</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸ’¾-å¤‡å¿˜å½•æ¨¡å¼"><a href="#ğŸ’¾-å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="ğŸ’¾ å¤‡å¿˜å½•æ¨¡å¼"></a>ğŸ’¾ å¤‡å¿˜å½•æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä»¥è®¡ç®—å™¨ï¼ˆå³å‘èµ·äººï¼‰ä¸ºä¾‹ï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™ä½ æ‰§è¡Œä¸€äº›è®¡ç®—ï¼Œæœ€åçš„è®¡ç®—éƒ½ä¼šä¿å­˜åœ¨å†…å­˜ï¼ˆå³å¤‡å¿˜ï¼‰é‡Œï¼Œè¿™æ ·ä½ å°±èƒ½è¿”å›åˆ°è¿™é‡Œï¼Œå¹¶ä¸”ç”¨ä¸€äº›æŒ‰é’®ï¼ˆå³å®ˆæŠ¤è€…ï¼‰æ¢å¤ã€‚ </p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>å¤‡å¿˜å½•æ¨¡å¼æ•æ‰å’Œä¿å­˜å½“å‰å¯¹è±¡çš„çŠ¶æ€ï¼Œç„¶åç”¨ä¸€ç§å¹³æ»‘çš„æ–¹å¼æ¢å¤ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The memento pattern is a software design pattern that provides the ability to restore an object to its previous state (undo via rollback).</p>
</blockquote>
<p>å½“ä½ è¦æä¾›æ’¤é”€æ–¹æ³•æ—¶å¼‚å¸¸å®ç”¨ã€‚</p>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>è®©æˆ‘ä»¬é‚£ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œç¼–è¾‘å™¨ä¸€ç›´ä¿å­˜çŠ¶æ€ï¼Œåœ¨ä½ éœ€è¦çš„æ—¶å€™å¯ä»¥æ¢å¤ã€‚</p>
<p>é¦–å…ˆä¸‹é¢æ˜¯æˆ‘ä»¬çš„å¤‡å¿˜å½•å¯¹è±¡ï¼Œå¯ä»¥ä¿å­˜ç¼–è¾‘å™¨çŠ¶æ€</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EditorMemento</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $content;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;content = $content;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯æˆ‘ä»¬çš„ç¼–è¾‘å™¨ï¼Œå³å‘èµ·è€…ï¼Œæ¥ä½¿ç”¨å¤‡å¿˜å½•å¯¹è±¡</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Editor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $content = <span class="string">''</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">type</span><span class="params">(string $words)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;content = <span class="keyword">$this</span>-&gt;content . <span class="string">' '</span> . $words;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;content;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> EditorMemento(<span class="keyword">$this</span>-&gt;content);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">restore</span><span class="params">(EditorMemento $memento)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;content = $memento-&gt;getContent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$editor = <span class="keyword">new</span> Editor();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å…¥ä¸€äº›ä¸œè¥¿</span></span><br><span class="line">$editor-&gt;type(<span class="string">'This is the first sentence.'</span>);</span><br><span class="line">$editor-&gt;type(<span class="string">'This is second.'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿å­˜çŠ¶æ€åˆ°ï¼šThis is the first sentence. This is second.</span></span><br><span class="line">$saved = $editor-&gt;save();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å…¥äº›åˆ«çš„ä¸œè¥¿</span></span><br><span class="line">$editor-&gt;type(<span class="string">'And this is third.'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: Content before Saving</span></span><br><span class="line"><span class="keyword">echo</span> $editor-&gt;getContent(); <span class="comment">// This is the first sentence. This is second. And this is third.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¢å¤åˆ°ä¸Šæ¬¡ä¿å­˜çŠ¶æ€</span></span><br><span class="line">$editor-&gt;restore($saved);</span><br><span class="line"></span><br><span class="line">$editor-&gt;getContent(); <span class="comment">// This is the first sentence. This is second.</span></span><br></pre></td></tr></table></figure>
<h2 id="ğŸ˜-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#ğŸ˜-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="ğŸ˜ è§‚å¯Ÿè€…æ¨¡å¼"></a>ğŸ˜ è§‚å¯Ÿè€…æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>ä¸€ä¸ªå¥½çš„ä¾‹å­æ˜¯æ±‚èŒè€…ï¼Œä»–ä»¬è®¢é˜…äº†ä¸€äº›å·¥ä½œå‘å¸ƒç½‘ç«™ï¼Œå½“æœ‰åˆé€‚çš„å·¥ä½œæœºä¼šæ—¶ï¼Œä»–ä»¬ä¼šæ”¶åˆ°æé†’ã€‚   </p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡é—´çš„ä¾èµ–ï¼Œè¿™æ ·æ— è®ºä½•æ—¶ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†çŠ¶æ€ï¼Œå…¶ä»–æ‰€æœ‰ä¾èµ–è€…ä¼šæ”¶åˆ°æé†’ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The observer pattern is a software design pattern in which an object, called the subject, maintains a list of its dependents, called observers, and notifies them automatically of any state changes, usually by calling one of their methods.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ç¿»è¯‘ä¸Šé¢çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰éœ€è¦æ”¶åˆ°å·¥ä½œå‘å¸ƒæé†’çš„æ±‚èŒè€…
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobPost</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $title;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $title)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;title = $title;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;title;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobSeeker</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">onJobPosted</span><span class="params">(JobPost $job)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Do something with the job posting</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Hi '</span> . <span class="keyword">$this</span>-&gt;name . <span class="string">'! New job posted: '</span>. $job-&gt;getTitle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯æ±‚èŒè€…è®¢é˜…çš„å·¥ä½œä¿¡æ¯
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobPostings</span> <span class="keyword">implements</span> <span class="title">Observable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $observers = [];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">notify</span><span class="params">(JobPost $jobPosting)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;observers <span class="keyword">as</span> $observer) &#123;</span><br><span class="line">            $observer-&gt;onJobPosted($jobPosting);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">attach</span><span class="params">(Observer $observer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers[] = $observer;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addJob</span><span class="params">(JobPost $jobPosting)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;notify($jobPosting);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºè®¢é˜…è€…</span></span><br><span class="line">$johnDoe = <span class="keyword">new</span> JobSeeker(<span class="string">'John Doe'</span>);</span><br><span class="line">$janeDoe = <span class="keyword">new</span> JobSeeker(<span class="string">'Jane Doe'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå‘å¸ƒè€…ï¼Œç»‘å®šè®¢é˜…è€…</span></span><br><span class="line">$jobPostings = <span class="keyword">new</span> JobPostings();</span><br><span class="line">$jobPostings-&gt;attach($johnDoe);</span><br><span class="line">$jobPostings-&gt;attach($janeDoe);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä¸€ä¸ªå·¥ä½œï¼Œçœ‹è®¢é˜…è€…æ˜¯å¦æ”¶åˆ°é€šçŸ¥</span></span><br><span class="line">$jobPostings-&gt;addJob(<span class="keyword">new</span> JobPost(<span class="string">'Software Engineer'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// Hi John Doe! New job posted: Software Engineer</span></span><br><span class="line"><span class="comment">// Hi Jane Doe! New job posted: Software Engineer</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸƒ-è®¿é—®è€…æ¨¡å¼"><a href="#ğŸƒ-è®¿é—®è€…æ¨¡å¼" class="headerlink" title="ğŸƒ è®¿é—®è€…æ¨¡å¼"></a>ğŸƒ è®¿é—®è€…æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>å‡è®¾ä¸€äº›äººè®¿é—®è¿ªæ‹œã€‚ä»–ä»¬éœ€è¦ä¸€äº›æ–¹å¼ï¼ˆå³ç­¾è¯ï¼‰æ¥è¿›å…¥è¿ªæ‹œã€‚æŠµè¾¾åï¼Œä»–ä»¬å¯ä»¥å»è¿ªæ‹œçš„ä»»ä½•åœ°æ–¹ï¼Œè€Œä¸ç”¨ç”³è¯·è®¸å¯æˆ–è€…è·‘è…¿ï¼›ä»–ä»¬çŸ¥é“çš„åœ°æ–¹éƒ½å¯ä»¥å»ã€‚è®¿é—®è€…æ¨¡å¼å¯ä»¥è®©ä½ è¿™æ ·åšï¼Œå®ƒå¸®ä½ æ·»åŠ å¯ä»¥è®¿é—®çš„åœ°æ–¹ï¼Œç„¶åä»–ä»¬å¯ä»¥è®¿é—®å°½å¯èƒ½å¤šçš„åœ°æ–¹è€Œä¸ç”¨åˆ°å¤„è·‘è…¿ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>è®¿é—®è€…æ¨¡å¼å¯ä»¥è®©ä½ æ·»åŠ æ›´å¤šçš„æ“ä½œåˆ°å¯¹è±¡ï¼Œè€Œä¸ç”¨æ”¹å˜ä»–ä»¬ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In object-oriented programming and software engineering, the visitor design pattern is a way of separating an algorithm from an object structure on which it operates. A practical result of this separation is the ability to add new operations to existing object structures without modifying those structures. It is one way to follow the open/closed principle.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>è®©æˆ‘ä»¬ä»¥åŠ¨ç‰©å›­æ¨¡æ‹Ÿå™¨ä¸ºä¾‹ï¼Œåœ¨é‡Œé¢æˆ‘ä»¬æœ‰ä¸€äº›åŠ¨ç‰©ï¼Œæˆ‘ä»¬å¿…é¡»è®©ä»–ä»¬å«ã€‚è®©æˆ‘ä»¬ç”¨è®¿é—®è€…æ¨¡å¼æ¥ç¿»è¯‘</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¢«è®¿è€…</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">accept</span><span class="params">(AnimalOperation $operation)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®è€…</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">AnimalOperation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitMonkey</span><span class="params">(Monkey $monkey)</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitLion</span><span class="params">(Lion $lion)</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitDolphin</span><span class="params">(Dolphin $dolphin)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then we have our implementations for the animals
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monkey</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">shout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Ooh oo aa aa!'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">accept</span><span class="params">(AnimalOperation $operation)</span> </span>&#123;</span><br><span class="line">        $operation-&gt;visitMonkey(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lion</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">roar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Roaaar!'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">accept</span><span class="params">(AnimalOperation $operation)</span> </span>&#123;</span><br><span class="line">        $operation-&gt;visitLion(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dolphin</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Tuut tuttu tuutt!'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">accept</span><span class="params">(AnimalOperation $operation)</span> </span>&#123;</span><br><span class="line">        $operation-&gt;visitDolphin(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å®ç°æˆ‘ä»¬çš„è®¿é—®è€…
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Speak</span> <span class="keyword">implements</span> <span class="title">AnimalOperation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitMonkey</span><span class="params">(Monkey $monkey)</span> </span>&#123;</span><br><span class="line">        $monkey-&gt;shout();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitLion</span><span class="params">(Lion $lion)</span> </span>&#123;</span><br><span class="line">        $lion-&gt;roar();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitDolphin</span><span class="params">(Dolphin $dolphin)</span> </span>&#123;</span><br><span class="line">        $dolphin-&gt;speak();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$monkey = <span class="keyword">new</span> Monkey();</span><br><span class="line">$lion = <span class="keyword">new</span> Lion();</span><br><span class="line">$dolphin = <span class="keyword">new</span> Dolphin();</span><br><span class="line"></span><br><span class="line">$speak = <span class="keyword">new</span> Speak();</span><br><span class="line"></span><br><span class="line">$monkey-&gt;accept($speak);    <span class="comment">// Ooh oo aa aa!    </span></span><br><span class="line">$lion-&gt;accept($speak);      <span class="comment">// Roaaar!</span></span><br><span class="line">$dolphin-&gt;accept($speak);   <span class="comment">// Tuut tutt tuutt!</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬æœ¬å¯ä»¥ç®€å•åœ°ç»™åŠ¨ç‰©åŠ ä¸€ä¸ªç»§æ‰¿å±‚æ¥åšåˆ°è¿™ç‚¹ï¼Œä½†æ˜¯è¿™æ ·æ¯å½“æˆ‘ä»¬è¦ç»™åŠ¨ç‰©å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸æ”¹å˜åŠ¨ç‰©ã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä»¬ä¸ç”¨æ”¹å˜ä»–ä»¬ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦ç»™åŠ¨ç‰©å¢åŠ ä¸€ä¸ªè·³çš„è¡Œä¸ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°å¢åŠ ä¸€ä¸ªæ–°çš„è®¿é—®è€…</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jump</span> <span class="keyword">implements</span> <span class="title">AnimalOperation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitMonkey</span><span class="params">(Monkey $monkey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Jumped 20 feet high! on to the tree!'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitLion</span><span class="params">(Lion $lion)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Jumped 7 feet! Back on the ground!'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visitDolphin</span><span class="params">(Dolphin $dolphin)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Walked on water a little and disappeared'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åè¿™æ ·ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$jump = <span class="keyword">new</span> Jump();</span><br><span class="line"></span><br><span class="line">$monkey-&gt;accept($speak);   <span class="comment">// Ooh oo aa aa!</span></span><br><span class="line">$monkey-&gt;accept($jump);    <span class="comment">// Jumped 20 feet high! on to the tree!</span></span><br><span class="line"></span><br><span class="line">$lion-&gt;accept($speak);     <span class="comment">// Roaaar!</span></span><br><span class="line">$lion-&gt;accept($jump);      <span class="comment">// Jumped 7 feet! Back on the ground! </span></span><br><span class="line"></span><br><span class="line">$dolphin-&gt;accept($speak);  <span class="comment">// Tuut tutt tuutt! </span></span><br><span class="line">$dolphin-&gt;accept($jump);   <span class="comment">// Walked on water a little and disappeared</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸ’¡-ç­–ç•¥æ¨¡å¼"><a href="#ğŸ’¡-ç­–ç•¥æ¨¡å¼" class="headerlink" title="ğŸ’¡ ç­–ç•¥æ¨¡å¼"></a>ğŸ’¡ ç­–ç•¥æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>è€ƒè™‘æ’åºçš„ä¾‹å­ï¼Œæˆ‘ä»¬å®ç°äº†å†’æ³¡æ’åºï¼Œä½†æ˜¯æ•°æ®å¼€å§‹å¢é•¿ï¼Œå†’æ³¡æ’åºå˜å¾—å¾ˆæ…¢ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸ªï¼Œæˆ‘ä»¬å®ç°äº†å¿«é€Ÿæ’åºã€‚ä½†ç°åœ¨å°½ç®¡å¿«é€Ÿæ’åºç®—æ³•å¯¹å¤§æ•°æ®é›†è¡¨ç°æ›´å¥½ï¼Œå°æ•°æ®é›†å´å¾ˆæ…¢ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç­–ç•¥ï¼Œå†’æ³¡æ’åºå¤„ç†å°æ•°æ®é›†ï¼Œå¿«é€Ÿæ’åºå¤„ç†å¤§æ•°æ®é›†ã€‚</p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ç­–ç•¥æ¨¡å¼å…è®¸ä½ åŸºäºæƒ…å†µé€‰æ‹©ç®—æ³•æˆ–ç­–ç•¥ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In computer programming, the strategy pattern (also known as the policy pattern) is a behavioural software design pattern that enables an algorithmâ€™s behavior to be selected at runtime.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>ç¿»è¯‘æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰äº†ç­–ç•¥æ¥å£å’Œä¸åŒçš„ç­–ç•¥å®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">SortStrategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span><span class="params">(array $dataset)</span> : <span class="title">array</span></span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BubbleSortStrategy</span> <span class="keyword">implements</span> <span class="title">SortStrategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span><span class="params">(array $dataset)</span> : <span class="title">array</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Sorting using bubble sort"</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// Do sorting</span></span><br><span class="line">        <span class="keyword">return</span> $dataset;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuickSortStrategy</span> <span class="keyword">implements</span> <span class="title">SortStrategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span><span class="params">(array $dataset)</span> : <span class="title">array</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Sorting using quick sort"</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Do sorting</span></span><br><span class="line">        <span class="keyword">return</span> $dataset;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯å®ç”¨ç­–ç•¥çš„è°ƒç”¨è€…
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sorter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $sorter;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(SortStrategy $sorter)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;sorter = $sorter;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span><span class="params">(array $dataset)</span> : <span class="title">array</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;sorter-&gt;sort($dataset);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$dataset = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">$sorter = <span class="keyword">new</span> Sorter(<span class="keyword">new</span> BubbleSortStrategy());</span><br><span class="line">$sorter-&gt;sort($dataset); <span class="comment">// è¾“å‡º : Sorting using bubble sort</span></span><br><span class="line"></span><br><span class="line">$sorter = <span class="keyword">new</span> Sorter(<span class="keyword">new</span> QuickSortStrategy());</span><br><span class="line">$sorter-&gt;sort($dataset); <span class="comment">// è¾“å‡º : Sorting using quick sort</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸ’¢-çŠ¶æ€æ¨¡å¼"><a href="#ğŸ’¢-çŠ¶æ€æ¨¡å¼" class="headerlink" title="ğŸ’¢ çŠ¶æ€æ¨¡å¼"></a>ğŸ’¢ çŠ¶æ€æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>æƒ³è±¡ä½ åœ¨ä½¿ç”¨ç”»å›¾ç¨‹åºï¼Œä½ é€‰æ‹©ç¬”åˆ·æ¥ç”»ã€‚ç°åœ¨ç¬”åˆ·æ ¹æ®é€‰æ‹©çš„é¢œè‰²æ”¹å˜è‡ªå·±çš„è¡Œä¸ºã€‚å³å¦‚æœä½ é€‰æ‹©çº¢è‰²ï¼Œå®ƒå°±ç”¨çº¢è‰²ç”»ï¼Œå¦‚æœæ˜¯è“è‰²å®ƒå°±ç”¨è“è‰²ç­‰ç­‰ã€‚  </p>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>ä»–è®©ä½ èƒ½ç±»çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ”¹å˜å…¶è¡Œä¸ºã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>The state pattern is a behavioral software design pattern that implements a state machine in an object-oriented way. With the state pattern, a state machine is implemented by implementing each individual state as a derived class of the state pattern interface, and implementing state transitions by invoking methods defined by the patternâ€™s superclass.
The state pattern can be interpreted as a strategy pattern which is able to switch the current strategy through invocations of methods defined in the patternâ€™s interface.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>è®©æˆ‘ä»¬ä»¥ç¼–è¾‘å™¨ä½œä¸ºä¾‹å­ï¼Œå®ƒèƒ½è®©ä½ æ”¹å˜æ–‡æœ¬çš„çŠ¶æ€ï¼Œæ¯”å¦‚ä½ é€‰æ‹©äº†åŠ ç²—ï¼Œå®ƒå¼€å§‹ä»¥åŠ ç²—å­—ä½“ä¹¦å†™ï¼Œå¦‚æœé€‰æ‹©å€¾æ–œï¼Œå°±ä»¥å€¾æ–œå­—ä½“ç­‰ç­‰ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰çŠ¶æ€æ¥å£å’Œä¸€äº›çŠ¶æ€å®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">WritingState</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span><span class="params">(string $words)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpperCase</span> <span class="keyword">implements</span> <span class="title">WritingState</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span><span class="params">(string $words)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> strtoupper($words); </span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LowerCase</span> <span class="keyword">implements</span> <span class="title">WritingState</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span><span class="params">(string $words)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> strtolower($words); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Default</span> <span class="keyword">implements</span> <span class="title">WritingState</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span><span class="params">(string $words)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> $words;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ç¼–è¾‘å™¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextEditor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $state;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(WritingState $state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = $state;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setState</span><span class="params">(WritingState $state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = $state;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">type</span><span class="params">(string $words)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state-&gt;write($words);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$editor = <span class="keyword">new</span> TextEditor(<span class="keyword">new</span> <span class="keyword">Default</span>());</span><br><span class="line"></span><br><span class="line">$editor-&gt;type(<span class="string">'First line'</span>);</span><br><span class="line"></span><br><span class="line">$editor-&gt;setState(<span class="keyword">new</span> UpperCaseState());</span><br><span class="line"></span><br><span class="line">$editor-&gt;type(<span class="string">'Second line'</span>);</span><br><span class="line">$editor-&gt;type(<span class="string">'Third line'</span>);</span><br><span class="line"></span><br><span class="line">$editor-&gt;setState(<span class="keyword">new</span> LowerCaseState());</span><br><span class="line"></span><br><span class="line">$editor-&gt;type(<span class="string">'Fourth line'</span>);</span><br><span class="line">$editor-&gt;type(<span class="string">'Fifth line'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="comment">// First line</span></span><br><span class="line"><span class="comment">// SECOND LINE</span></span><br><span class="line"><span class="comment">// THIRD LINE</span></span><br><span class="line"><span class="comment">// fourth line</span></span><br><span class="line"><span class="comment">// fifth line</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ğŸ“’-æ¨¡æ¿æ¨¡å¼"><a href="#ğŸ“’-æ¨¡æ¿æ¨¡å¼" class="headerlink" title="ğŸ“’ æ¨¡æ¿æ¨¡å¼"></a>ğŸ“’ æ¨¡æ¿æ¨¡å¼</h2><p>ç°å®ä¾‹å­</p>
<blockquote>
<p>å‡è®¾æˆ‘ä»¬è¦å»ºæˆ¿å­ã€‚å»ºé€ çš„æ­¥éª¤ç±»ä¼¼è¿™æ · </p>
<ul>
<li>å‡†å¤‡æˆ¿å­çš„åœ°åŸº</li>
<li>å»ºé€ å¢™</li>
<li>å»ºé€ æˆ¿é¡¶</li>
<li>ç„¶åæ˜¯åœ°æ¿
è¿™äº›æ­¥éª¤æ­¥éª¤çš„é¡ºåºæ°¸è¿œä¸ä¼šå˜ï¼Œå³ä½ ä¸èƒ½åœ¨å»ºå¢™ä¹‹å‰å»ºå±‹é¡¶ï¼Œå½“æ—¶æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥æ”¹å˜ï¼Œæ¯”å¦‚å¢™å¯ä»¥æ˜¯æœ¨å¤´å¯ä»¥æ˜¯èšé…¯æˆ–è€…çŸ³å¤´ã€‚</li>
</ul>
</blockquote>
<p>ç™½è¯</p>
<blockquote>
<p>æ¨¡æ¿æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªç®—æ³•ä¼šå¦‚ä½•æ‰§è¡Œçš„éª¨æ¶ï¼Œä½†æŠŠè¿™äº›æ­¥éª¤çš„å®ç°ç§»äº¤ç»™å­ç±»ã€‚</p>
</blockquote>
<p>ç»´åŸºç™¾ç§‘</p>
<blockquote>
<p>In software engineering, the template method pattern is a behavioral design pattern that defines the program skeleton of an algorithm in an operation, deferring some steps to subclasses. It lets one redefine certain steps of an algorithm without changing the algorithmâ€™s structure.</p>
</blockquote>
<p><strong>ä»£ç ä¾‹å­</strong></p>
<p>æƒ³è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ªæ„å»ºå·¥å…·å¸®æˆ‘ä»¬æµ‹è¯•ï¼Œçº é”™ï¼Œæ„å»ºï¼Œç”Ÿæˆæ„å»ºæŠ¥å‘Šï¼ˆå³ä»£ç æŠ¥å‘Šï¼ŒæŸ¥é”™æŠ¥å‘Šï¼‰ï¼Œç„¶åæŠŠåº”ç”¨å‘å¸ƒåˆ°æµ‹è¯•æœåŠ¡å™¨ã€‚</p>
<p>é¦–å…ˆæ˜¯æˆ‘ä»¬çš„åŸºç¡€ç±»ï¼Œå®ƒæè¿°äº†æ„å»ºç®—æ³•çš„éª¨æ¶
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Template method </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">function</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;test();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;lint();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;assemble();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;deploy();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">lint</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">assemble</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">deploy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸‹æ˜¯å®ç°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidBuilder</span> <span class="keyword">extends</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Running android tests'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">lint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Linting the android code'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">assemble</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Assembling the android build'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deploy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Deploying android build to server'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IosBuilder</span> <span class="keyword">extends</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Running ios tests'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">lint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Linting the ios code'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">assemble</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Assembling the ios build'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deploy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Deploying ios build to server'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$androidBuilder = <span class="keyword">new</span> AndroidBuilder();</span><br><span class="line">$androidBuilder-&gt;build();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="comment">// Running android tests</span></span><br><span class="line"><span class="comment">// Linting the android code</span></span><br><span class="line"><span class="comment">// Assembling the android build</span></span><br><span class="line"><span class="comment">// Deploying android build to server</span></span><br><span class="line"></span><br><span class="line">$iosBuilder = <span class="keyword">new</span> IosBuilder();</span><br><span class="line">$iosBuilder-&gt;build();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="comment">// Running ios tests</span></span><br><span class="line"><span class="comment">// Linting the ios code</span></span><br><span class="line"><span class="comment">// Assembling the ios build</span></span><br><span class="line"><span class="comment">// Deploying ios build to server</span></span><br></pre></td></tr></table></figure>
<h2 id="ğŸš¦-æ”¶å°¾äº†åŒå¿—ä»¬"><a href="#ğŸš¦-æ”¶å°¾äº†åŒå¿—ä»¬" class="headerlink" title="ğŸš¦ æ”¶å°¾äº†åŒå¿—ä»¬"></a>ğŸš¦ æ”¶å°¾äº†åŒå¿—ä»¬</h2><p>ç»ˆäºæ”¶å°¾äº†ã€‚æˆ‘ä¼šç»§ç»­æ”¹è¿›è¿™ç¯‡æ–‡æ¡£ï¼Œæ‰€ä»¥ä½ æˆ–è®¸éœ€è¦ watch/star è¿™ä¸ªä»“åº“ï¼Œå…ˆç åçœ‹ã€‚</p>
<h2 id="ğŸ‘¬-Contribution"><a href="#ğŸ‘¬-Contribution" class="headerlink" title="ğŸ‘¬ Contribution"></a>ğŸ‘¬ Contribution</h2><ul>
<li>Report issues</li>
<li>Open pull request with improvements</li>
<li>Spread the word</li>
</ul>
<h2 id="ç¿»è¯‘"><a href="#ç¿»è¯‘" class="headerlink" title="ç¿»è¯‘"></a>ç¿»è¯‘</h2><p><a href="https://github.com/questionlin" target="_blank" rel="noopener">æœˆçƒäºº</a></p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT Â© <a href="http://kamranahmed.info" target="_blank" rel="noopener">Kamran Ahmed</a></p>

        
        <div id="comment-container">
        </div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/simonlin">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="http://weibo.com/1919879611">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/questionlin">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</html>
